%% Generated by Sphinx.
\def\sphinxdocclass{report}
\documentclass[letterpaper,10pt,english]{sphinxmanual}
\ifdefined\pdfpxdimen
   \let\sphinxpxdimen\pdfpxdimen\else\newdimen\sphinxpxdimen
\fi \sphinxpxdimen=.75bp\relax

\usepackage[utf8]{inputenc}
\ifdefined\DeclareUnicodeCharacter
 \ifdefined\DeclareUnicodeCharacterAsOptional\else
  \DeclareUnicodeCharacter{00A0}{\nobreakspace}
\fi\fi
\usepackage{cmap}
\usepackage[T1]{fontenc}
\usepackage{amsmath,amssymb,amstext}
\usepackage{babel}
\usepackage{times}
\usepackage[Bjarne]{fncychap}
\usepackage{longtable}
\usepackage{sphinx}

\usepackage{geometry}
\usepackage{multirow}
\usepackage{eqparbox}

% Include hyperref last.
\usepackage{hyperref}
% Fix anchor placement for figures with captions.
\usepackage{hypcap}% it must be loaded after hyperref.
% Set up styles of URL: it should be placed after hyperref.
\urlstyle{same}
\addto\captionsenglish{\renewcommand{\contentsname}{Contents:}}

\addto\captionsenglish{\renewcommand{\figurename}{Fig.}}
\addto\captionsenglish{\renewcommand{\tablename}{Table}}
\addto\captionsenglish{\renewcommand{\literalblockname}{Listing}}

\addto\extrasenglish{\def\pageautorefname{page}}

\setcounter{tocdepth}{3}
\setcounter{secnumdepth}{3}

% Jupyter Notebook prompt colors
\definecolor{nbsphinxin}{HTML}{303F9F}
\definecolor{nbsphinxout}{HTML}{D84315}
% ANSI colors for output streams and traceback highlighting
\definecolor{ansi-black}{HTML}{3E424D}
\definecolor{ansi-black-intense}{HTML}{282C36}
\definecolor{ansi-red}{HTML}{E75C58}
\definecolor{ansi-red-intense}{HTML}{B22B31}
\definecolor{ansi-green}{HTML}{00A250}
\definecolor{ansi-green-intense}{HTML}{007427}
\definecolor{ansi-yellow}{HTML}{DDB62B}
\definecolor{ansi-yellow-intense}{HTML}{B27D12}
\definecolor{ansi-blue}{HTML}{208FFB}
\definecolor{ansi-blue-intense}{HTML}{0065CA}
\definecolor{ansi-magenta}{HTML}{D160C4}
\definecolor{ansi-magenta-intense}{HTML}{A03196}
\definecolor{ansi-cyan}{HTML}{60C6C8}
\definecolor{ansi-cyan-intense}{HTML}{258F8F}
\definecolor{ansi-white}{HTML}{C5C1B4}
\definecolor{ansi-white-intense}{HTML}{A1A6B2}
\definecolor{ansi-default-inverse-fg}{HTML}{FFFFFF}
\definecolor{ansi-default-inverse-bg}{HTML}{000000}

% Define "notice" environment, which was removed in Sphinx 1.7.
% At some point, "notice" should be replaced by "sphinxadmonition",
% which is available since Sphinx 1.5.
\makeatletter
\@ifundefined{notice}{%
\newenvironment{notice}{\begin{sphinxadmonition}}{\end{sphinxadmonition}}%
}{}
\makeatother



\title{Global Affairs Canada - Compliance Report Documentation}
\date{Dec 20, 2017}
\release{1.0}
\author{Rory Scott}
\newcommand{\sphinxlogo}{}
\renewcommand{\releasename}{Release}
\makeindex

\begin{document}

\maketitle
\sphinxtableofcontents
\phantomsection\label{\detokenize{index::doc}}



\chapter{Introduction}
\label{\detokenize{Global Affairs Canada - Compliance Report:Introduction}}\label{\detokenize{Global Affairs Canada - Compliance Report:welcome-to-the-compliance-report-for-global-affairs-canada}}\label{\detokenize{Global Affairs Canada - Compliance Report::doc}}
This initial report will give a comprehensive review of the ‘compliance’
of GAC’s IATI activities according to the well established aspects of
IATI data quality, namely:
\begin{itemize}
\item {} 
Schema validity: a simple test of adherence to the IATI standard XML
syntax

\item {} 
Adherence to IATI rulesets: test all activities for adherence to the
IATI Standard machine readable rulesets.

\item {} 
A deeper view of the fields published with respect to the use cases
3.1.1-6 detailed below.

\end{itemize}


\chapter{Setup and Data Acquisition}
\label{\detokenize{Global Affairs Canada - Compliance Report:Setup-and-Data-Acquisition}}
This section may be of interest on a technical level, but isn't
informative with regards to the analytical scope of this report. In
short, it sets up the notebook and then processes the given IATI files
and aggregates them for analysis. Some changes will need to be made here
if a user or practitioner wishes to supply local IATI XML files rather
than using the ones pulled from the IATI Registry.


\section{Imports and Housekeeping}
\label{\detokenize{Global Affairs Canada - Compliance Report:Imports-and-Housekeeping}}
\begin{notice}{warning}{}\unskip
The following value is \sphinxstylestrong{{}`{}`True{}`{}`}, the notebook attempts to get files
and validate them over the network. If \sphinxstylestrong{{}`{}`False{}`{}`}, it assumes that
these processes have been run before, meaning the required files would
be in the raw and intermediate data folders and it can defer to them
instead.
\end{notice}

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [303]: }\PYG{n}{run\PYGZus{}from\PYGZus{}scratch} \PYG{o}{=} \PYG{k+kc}{False}
\end{Verbatim}

There are several libraries required by Python to conduct the analysis
and visualisation in this notebook, which are all imported below.

This notebook uses a three part files system to store data:
\begin{itemize}
\item {} 
\sphinxstylestrong{{}`{}`raw{}`{}`}: this folder should contain all and only the IATI XML of
interest. The initial use of this notebook is to analyse live IATI
data, hosted at specific URLs. This notebook can be adapted to use
only local files, and instructions for this are given in-line.

\item {} 
\sphinxstylestrong{{}`{}`intermediate{}`{}`}: this folder is used as a store of data which
has been processed and might be of interest, is used multiple times,
or is useful to have in case it is desirable to run the notebook
off-line.

\item {} 
\sphinxstylestrong{{}`{}`final{}`{}`}: this folder contains any data appendices. For
instance, an Excel workbook is built over the course of this
notebook, with data tables that might be of interest included.

\end{itemize}

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [304]: }\PYG{c+c1}{\PYGZsh{} Import Python libraries}
          \PYG{k+kn}{import} \PYG{n+nn}{json}
          \PYG{k+kn}{import} \PYG{n+nn}{re}
          \PYG{k+kn}{import} \PYG{n+nn}{pandas} \PYG{k}{as} \PYG{n+nn}{pd}
          \PYG{k+kn}{import} \PYG{n+nn}{requests} \PYG{k}{as} \PYG{n+nn}{rq}
          \PYG{k+kn}{from} \PYG{n+nn}{bokeh}\PYG{n+nn}{.}\PYG{n+nn}{charts} \PYG{k}{import} \PYG{n}{Histogram}\PYG{p}{,} \PYG{n}{output\PYGZus{}notebook}\PYG{p}{,} \PYG{n}{show}
          \PYG{k+kn}{from} \PYG{n+nn}{datetime} \PYG{k}{import} \PYG{n}{datetime}
          
          \PYG{c+c1}{\PYGZsh{} set directories}
          \PYG{n}{RAW} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{../data/raw/}\PYG{l+s+s2}{\PYGZdq{}}
          \PYG{n}{INTERMEDIATE} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{../data/intermediate/}\PYG{l+s+s2}{\PYGZdq{}}
          \PYG{n}{FINAL} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{../data/final/}\PYG{l+s+s2}{\PYGZdq{}}
          \PYG{n}{REGISTRY\PYGZus{}ID} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{gac\PYGZhy{}amc}\PYG{l+s+s2}{\PYGZdq{}}
          \PYG{c+c1}{\PYGZsh{} Create and Excel Writer to output sheets throughout the analysis}
          \PYG{n}{appendix\PYGZus{}1\PYGZus{}filepath} \PYG{o}{=} \PYG{n}{FINAL} \PYG{o}{+} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Compliance\PYGZhy{}Report\PYGZhy{}Data.xlsx}\PYG{l+s+s1}{\PYGZsq{}}
          \PYG{n}{pd\PYGZus{}writer} \PYG{o}{=} \PYG{n}{pd}\PYG{o}{.}\PYG{n}{ExcelWriter}\PYG{p}{(}\PYG{n}{appendix\PYGZus{}1\PYGZus{}filepath}\PYG{p}{)}
          
          \PYG{n}{output\PYGZus{}notebook}\PYG{p}{(}\PYG{p}{)}
\end{Verbatim}


\section{Getting Original IATI Files}
\label{\detokenize{Global Affairs Canada - Compliance Report:Getting-Original-IATI-Files}}
Retrieving the IATI files from supplied URLs and saving them to the
`raw' data folder. The cell below can be skipped if unpublished / local
files are being used. Just save all and only the IATI XML files of
interest into the `raw' data folder.

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [305]: }\PYG{c+c1}{\PYGZsh{} List of all XML urls to pull and merge}
          \PYG{n}{registry\PYGZus{}files} \PYG{o}{=} \PYG{p}{[}
              \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{http://w05.international.gc.ca/projectbrowser\PYGZhy{}banqueprojets}\PYG{l+s+s2}{\PYGZdq{}}
                  \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{/iita\PYGZhy{}iati/dfatd\PYGZhy{}maecd\PYGZus{}activit\PYGZus{}status\PYGZus{}2\PYGZus{}3.xml}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
              \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{http://w05.international.gc.ca/projectbrowser\PYGZhy{}banqueprojets}\PYG{l+s+s2}{\PYGZdq{}}
                  \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{/iita\PYGZhy{}iati/dfatd\PYGZhy{}maecd\PYGZus{}activit\PYGZus{}status\PYGZus{}4.xml}\PYG{l+s+s2}{\PYGZdq{}}
          \PYG{p}{]}
          
          \PYG{k}{if} \PYG{n}{run\PYGZus{}from\PYGZus{}scratch}\PYG{p}{:}
              \PYG{k}{for} \PYG{n}{registry\PYGZus{}file} \PYG{o+ow}{in} \PYG{n}{registry\PYGZus{}files}\PYG{p}{:}
          
                  \PYG{c+c1}{\PYGZsh{} split off after the last dash to create the file name, so http://www.abc/def.xml \PYGZhy{}\PYGZhy{}\PYGZgt{} def.xml}
                  \PYG{n}{registry\PYGZus{}xml\PYGZus{}name} \PYG{o}{=} \PYG{n}{re}\PYG{o}{.}\PYG{n}{search}\PYG{p}{(}\PYG{l+s+sa}{r}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{[\PYGZca{}/]*.xml}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{registry\PYGZus{}file}\PYG{p}{)}\PYG{o}{.}\PYG{n}{group}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{)}
                  \PYG{n}{output\PYGZus{}path} \PYG{o}{=} \PYG{n}{RAW} \PYG{o}{+} \PYG{n}{registry\PYGZus{}xml\PYGZus{}name}
          
                  \PYG{n}{request} \PYG{o}{=} \PYG{n}{rq}\PYG{o}{.}\PYG{n}{get}\PYG{p}{(}\PYG{n}{registry\PYGZus{}file}\PYG{p}{)}
          
                  \PYG{k}{with} \PYG{n+nb}{open}\PYG{p}{(}\PYG{n}{output\PYGZus{}path}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{wb}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)} \PYG{k}{as} \PYG{n}{out\PYGZus{}file}\PYG{p}{:}
                      \PYG{n}{out\PYGZus{}file}\PYG{o}{.}\PYG{n}{write}\PYG{p}{(}\PYG{n}{request}\PYG{o}{.}\PYG{n}{content}\PYG{p}{)}
          
                  \PYG{n+nb}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+si}{\PYGZob{}\PYGZcb{}}\PYG{l+s+s2}{: file written to }\PYG{l+s+si}{\PYGZob{}\PYGZcb{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{.}\PYG{n}{format}\PYG{p}{(}\PYG{n}{registry\PYGZus{}xml\PYGZus{}name}\PYG{p}{,} \PYG{n}{output\PYGZus{}path}\PYG{p}{)}\PYG{p}{)}
          \PYG{k}{else}\PYG{p}{:}
              \PYG{n+nb}{print}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{skipped \PYGZhy{} to run, change }\PYG{l+s+se}{\PYGZbs{}\PYGZsq{}}\PYG{l+s+s1}{run\PYGZus{}from\PYGZus{}scratch}\PYG{l+s+se}{\PYGZbs{}\PYGZsq{}}\PYG{l+s+s1}{ to true...}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\end{Verbatim}
%
\begin{OriginalVerbatim}[commandchars=\\\{\}]
skipped - to run, change 'run\_from\_scratch' to true{\ldots}
\end{OriginalVerbatim}
% The following \relax is needed to avoid problems with adjacent ANSI
% cells and some other stuff (e.g. bullet lists) following ANSI cells.
% See https://github.com/sphinx-doc/sphinx/issues/3594
\relax

\section{Merging IATI Files}
\label{\detokenize{Global Affairs Canada - Compliance Report:Merging-IATI-Files}}
\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [306]: }\PYG{c+c1}{\PYGZsh{} Show IATI files available}
          \PYG{k+kn}{import} \PYG{n+nn}{os}
          \PYG{k+kn}{import} \PYG{n+nn}{lxml}\PYG{n+nn}{.}\PYG{n+nn}{etree} \PYG{k}{as} \PYG{n+nn}{ET}
          
          \PYG{n}{file\PYGZus{}names} \PYG{o}{=} \PYG{p}{[}\PYG{n}{RAW} \PYG{o}{+} \PYG{n}{name} \PYG{k}{for} \PYG{n}{name} \PYG{o+ow}{in} \PYG{n}{os}\PYG{o}{.}\PYG{n}{listdir}\PYG{p}{(}\PYG{n}{RAW}\PYG{p}{)} \PYG{k}{if} \PYG{n}{name}\PYG{o}{.}\PYG{n}{endswith}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{.xml}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{]}
          \PYG{k}{for} \PYG{n}{name} \PYG{o+ow}{in} \PYG{n}{file\PYGZus{}names}\PYG{p}{:}
              \PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{name}\PYG{p}{)}
\end{Verbatim}
%
\begin{OriginalVerbatim}[commandchars=\\\{\}]
../data/raw/dfatd-maecd\_activit\_status\_2\_3.xml
../data/raw/dfatd-maecd\_activit\_status\_4.xml
\end{OriginalVerbatim}
% The following \relax is needed to avoid problems with adjacent ANSI
% cells and some other stuff (e.g. bullet lists) following ANSI cells.
% See https://github.com/sphinx-doc/sphinx/issues/3594
\relax
\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [307]: }\PYG{c+c1}{\PYGZsh{} This cell takes all of the XML IATI files in}
          \PYG{c+c1}{\PYGZsh{} the \PYGZsq{}raw\PYGZsq{} directory and merges them into one file}
          
          \PYG{n}{combined\PYGZus{}filepath} \PYG{o}{=} \PYG{n}{INTERMEDIATE} \PYG{o}{+} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{combined.xml}\PYG{l+s+s2}{\PYGZdq{}}
          
          \PYG{n+nb}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{Combining }\PYG{l+s+si}{\PYGZob{}\PYGZcb{}}\PYG{l+s+s2}{ IATI files }\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{.}\PYG{n}{format}\PYG{p}{(}\PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{file\PYGZus{}names}\PYG{p}{)}\PYG{p}{)}\PYG{p}{)}
          
          \PYG{c+c1}{\PYGZsh{} Start with the first file}
          \PYG{n}{big\PYGZus{}iati} \PYG{o}{=} \PYG{n}{ET}\PYG{o}{.}\PYG{n}{parse}\PYG{p}{(}\PYG{n}{file\PYGZus{}names}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{)}\PYG{o}{.}\PYG{n}{getroot}\PYG{p}{(}\PYG{p}{)}
          
          \PYG{c+c1}{\PYGZsh{} Start a dictionary to keep track of the additions}
          \PYG{n}{merge\PYGZus{}log} \PYG{o}{=} \PYG{p}{\PYGZob{}}\PYG{n}{file\PYGZus{}names}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{:} \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{big\PYGZus{}iati}\PYG{o}{.}\PYG{n}{getchildren}\PYG{p}{(}\PYG{p}{)}\PYG{p}{)}\PYG{p}{\PYGZcb{}}
          
          \PYG{c+c1}{\PYGZsh{} Iterate through the 2nd through last file and}
          \PYG{c+c1}{\PYGZsh{} insert their activtities to into the first}
          \PYG{c+c1}{\PYGZsh{} and update the dictionary}
          \PYG{k}{for} \PYG{n}{xml\PYGZus{}file} \PYG{o+ow}{in} \PYG{n}{file\PYGZus{}names}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{:}\PYG{p}{]}\PYG{p}{:}
              \PYG{n}{data} \PYG{o}{=} \PYG{n}{ET}\PYG{o}{.}\PYG{n}{parse}\PYG{p}{(}\PYG{n}{xml\PYGZus{}file}\PYG{p}{)}\PYG{o}{.}\PYG{n}{getroot}\PYG{p}{(}\PYG{p}{)}
              \PYG{n}{merge\PYGZus{}log}\PYG{p}{[}\PYG{n}{xml\PYGZus{}file}\PYG{p}{]} \PYG{o}{=} \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{data}\PYG{o}{.}\PYG{n}{getchildren}\PYG{p}{(}\PYG{p}{)}\PYG{p}{)}
              \PYG{n}{big\PYGZus{}iati}\PYG{o}{.}\PYG{n}{extend}\PYG{p}{(}\PYG{n}{data}\PYG{o}{.}\PYG{n}{getchildren}\PYG{p}{(}\PYG{p}{)}\PYG{p}{)}
          
          \PYG{c+c1}{\PYGZsh{} Print a small report on the merging}
          \PYG{n+nb}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Files Merged: }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
          \PYG{k}{for} \PYG{n}{file}\PYG{p}{,} \PYG{n}{activity\PYGZus{}count} \PYG{o+ow}{in} \PYG{n}{merge\PYGZus{}log}\PYG{o}{.}\PYG{n}{items}\PYG{p}{(}\PYG{p}{)}\PYG{p}{:}
              \PYG{n+nb}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\textbar{}\PYGZhy{}\PYGZgt{} }\PYG{l+s+si}{\PYGZob{}\PYGZcb{}}\PYG{l+s+s2}{ activities from }\PYG{l+s+si}{\PYGZob{}\PYGZcb{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{.}\PYG{n}{format}\PYG{p}{(}\PYG{n}{activity\PYGZus{}count}\PYG{p}{,} \PYG{n}{file}\PYG{p}{)}\PYG{p}{)}
          \PYG{n+nb}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\textbar{}\PYGZhy{}\PYGZhy{}\PYGZgt{} }\PYG{l+s+si}{\PYGZob{}\PYGZcb{}}\PYG{l+s+s2}{ in total}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{.}\PYG{n}{format}\PYG{p}{(}\PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{big\PYGZus{}iati}\PYG{o}{.}\PYG{n}{getchildren}\PYG{p}{(}\PYG{p}{)}\PYG{p}{)}\PYG{p}{)}\PYG{p}{)}
          
          \PYG{k}{with} \PYG{n+nb}{open}\PYG{p}{(}\PYG{n}{combined\PYGZus{}filepath}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{wb}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)} \PYG{k}{as} \PYG{n}{out\PYGZus{}file}\PYG{p}{:}
              \PYG{n}{out\PYGZus{}file}\PYG{o}{.}\PYG{n}{write}\PYG{p}{(}\PYG{n}{ET}\PYG{o}{.}\PYG{n}{tostring}\PYG{p}{(}\PYG{n}{big\PYGZus{}iati}\PYG{p}{,} \PYG{n}{encoding}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{utf8}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{pretty\PYGZus{}print}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}\PYG{p}{)}
\end{Verbatim}
%
\begin{OriginalVerbatim}[commandchars=\\\{\}]

Combining 2 IATI files

Files Merged:
|-> 1210 activities from ../data/raw/dfatd-maecd\_activit\_status\_2\_3.xml
|-> 2751 activities from ../data/raw/dfatd-maecd\_activit\_status\_4.xml
|--> 3961 in total
\end{OriginalVerbatim}
% The following \relax is needed to avoid problems with adjacent ANSI
% cells and some other stuff (e.g. bullet lists) following ANSI cells.
% See https://github.com/sphinx-doc/sphinx/issues/3594
\relax

\chapter{Initial Validation}
\label{\detokenize{Global Affairs Canada - Compliance Report:Initial-Validation}}
This step uses the CoVE api to validate the combined XML file made
above, which yields two sets of outcomes: the traditional schema
validation, and validation against the \sphinxhref{http://iatistandard.org/202/rulesets/}{IATI
Rulesets}. Using this api,
both are returned in structured JSON, which has been used here to create
succinct and opinionated tables, for example, by using a pivot table to
see how many different rules have been broken, before attempting to list
them all.

First, we send the file to CoVE and wait for it's response:

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [308]: }\PYG{k+kn}{import} \PYG{n+nn}{requests} \PYG{k}{as} \PYG{n+nn}{rq}
          
          \PYG{n}{json\PYGZus{}validation\PYGZus{}filepath} \PYG{o}{=} \PYG{n}{INTERMEDIATE} \PYG{o}{+} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{validation.json}\PYG{l+s+s1}{\PYGZsq{}}
          
          \PYG{k}{if} \PYG{n}{run\PYGZus{}from\PYGZus{}scratch}\PYG{p}{:}
              \PYG{n}{url} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{http://localhost:8000/api\PYGZus{}test}\PYG{l+s+s1}{\PYGZsq{}}
              \PYG{n}{files} \PYG{o}{=} \PYG{p}{\PYGZob{}}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{file}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{:} \PYG{n+nb}{open}\PYG{p}{(}\PYG{n}{INTERMEDIATE} \PYG{o}{+} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{combined.xml}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{rb}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{\PYGZcb{}}
              \PYG{n}{r} \PYG{o}{=} \PYG{n}{rq}\PYG{o}{.}\PYG{n}{post}\PYG{p}{(}\PYG{n}{url}\PYG{p}{,} \PYG{n}{files}\PYG{o}{=}\PYG{n}{files}\PYG{p}{,} \PYG{n}{data}\PYG{o}{=}\PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{name}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{combined.xml}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{)}
          
              \PYG{n+nb}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{CoVE validation was successful.}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)} \PYG{k}{if} \PYG{n}{r}\PYG{o}{.}\PYG{n}{ok} \PYG{k}{else} \PYG{n+nb}{print}\PYG{p}{(}
                  \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Something went wrong.}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
          
              \PYG{n}{validation\PYGZus{}json} \PYG{o}{=} \PYG{n}{r}\PYG{o}{.}\PYG{n}{json}\PYG{p}{(}\PYG{p}{)}
          
              \PYG{k}{with} \PYG{n+nb}{open}\PYG{p}{(}\PYG{n}{json\PYGZus{}validation\PYGZus{}filepath}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{w}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)} \PYG{k}{as} \PYG{n}{out\PYGZus{}file}\PYG{p}{:}
                  \PYG{n}{json}\PYG{o}{.}\PYG{n}{dump}\PYG{p}{(}\PYG{n}{validation\PYGZus{}json}\PYG{p}{,} \PYG{n}{out\PYGZus{}file}\PYG{p}{)}
          
              \PYG{n+nb}{print}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Validation JSON file has been written to }\PYG{l+s+si}{\PYGZob{}\PYGZcb{}}\PYG{l+s+s1}{.}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}\PYG{n}{format}\PYG{p}{(}
                  \PYG{n}{json\PYGZus{}validation\PYGZus{}filepath}\PYG{p}{)}\PYG{p}{)}
          
          \PYG{k}{else}\PYG{p}{:}
              \PYG{n}{validation\PYGZus{}json} \PYG{o}{=} \PYG{n}{json}\PYG{o}{.}\PYG{n}{load}\PYG{p}{(}\PYG{n+nb}{open}\PYG{p}{(}\PYG{n}{json\PYGZus{}validation\PYGZus{}filepath}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{r}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{)}
              \PYG{n+nb}{print}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{skipped \PYGZhy{} to run, change }\PYG{l+s+se}{\PYGZbs{}\PYGZsq{}}\PYG{l+s+s1}{run\PYGZus{}from\PYGZus{}scratch}\PYG{l+s+se}{\PYGZbs{}\PYGZsq{}}\PYG{l+s+s1}{ to true...}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\end{Verbatim}
%
\begin{OriginalVerbatim}[commandchars=\\\{\}]
skipped - to run, change 'run\_from\_scratch' to true{\ldots}
\end{OriginalVerbatim}
% The following \relax is needed to avoid problems with adjacent ANSI
% cells and some other stuff (e.g. bullet lists) following ANSI cells.
% See https://github.com/sphinx-doc/sphinx/issues/3594
\relax
Now, let's take a look at the data we received back.

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [309]: }\PYG{n}{ruleset\PYGZus{}table} \PYG{o}{=} \PYG{n}{pd}\PYG{o}{.}\PYG{n}{DataFrame}\PYG{p}{(}\PYG{n}{data}\PYG{o}{=}\PYG{n}{validation\PYGZus{}json}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{ruleset\PYGZus{}errors}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{)}
          \PYG{n}{schema\PYGZus{}table} \PYG{o}{=} \PYG{n}{pd}\PYG{o}{.}\PYG{n}{DataFrame}\PYG{p}{(}\PYG{n}{data}\PYG{o}{=}\PYG{n}{validation\PYGZus{}json}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{validation\PYGZus{}errors}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{)}
          
          \PYG{n+nb}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{CoVE has found }\PYG{l+s+si}{\PYGZob{}\PYGZcb{}}\PYG{l+s+s2}{ schema errors, and }\PYG{l+s+si}{\PYGZob{}\PYGZcb{}}\PYG{l+s+s2}{ ruleset errors}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{.}\PYG{n}{format}\PYG{p}{(}
              \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{schema\PYGZus{}table}\PYG{p}{)}\PYG{p}{,} \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{ruleset\PYGZus{}table}\PYG{p}{)}\PYG{p}{)}\PYG{p}{)}
\end{Verbatim}
%
\begin{OriginalVerbatim}[commandchars=\\\{\}]
CoVE has found 3477 schema errors, and 30 ruleset errors
\end{OriginalVerbatim}
% The following \relax is needed to avoid problems with adjacent ANSI
% cells and some other stuff (e.g. bullet lists) following ANSI cells.
% See https://github.com/sphinx-doc/sphinx/issues/3594
\relax

\section{Schema Validation}
\label{\detokenize{Global Affairs Canada - Compliance Report:Schema-Validation}}
Before looking at all of the specific validation errors, let's use a
pivot table to uncover how many types of errors there are:

\begin{notice}{note}{}\unskip
The numbers you see under `path' and `value' are counts, which allows
this function to serve as a count of the number of schema violations
associated with each `description' (each schema rule).
\end{notice}

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [310]: }\PYG{n}{schema\PYGZus{}table}\PYG{o}{.}\PYG{n}{pivot\PYGZus{}table}\PYG{p}{(}\PYG{n}{index}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{description}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{aggfunc}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{count}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxout}{Out[310]: }path  value
          description
          \PYGZsq{}document\PYGZhy{}link\PYGZsq{}, attribute \PYGZsq{}url\PYGZsq{} is not a valid...     2      2
          \PYGZsq{}result\PYGZsq{}: Missing child element(s), expected is...  3475   3475
\end{Verbatim}

Only two types are found. The first two shown below indicate that two
activities have invalid URIs. The greater issue which affects more than
85\% (3470 / 3961 * 100) of the activities supplied is the lack of an
indicator in the results element. The first five rows of the raw table
can be seen here, and the whole file has been saved to Appendix 1 under
the tab `Schema Violations'.

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [311]: }\PYG{n}{schema\PYGZus{}table}\PYG{o}{.}\PYG{n}{to\PYGZus{}excel}\PYG{p}{(}\PYG{n}{pd\PYGZus{}writer}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Schema Violations}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
          \PYG{n}{schema\PYGZus{}table}\PYG{o}{.}\PYG{n}{head}\PYG{p}{(}\PYG{p}{)} \PYG{c+c1}{\PYGZsh{} show the first five rows}
\end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxout}{Out[311]: }description  \PYGZbs{}
          0  \PYGZsq{}document\PYGZhy{}link\PYGZsq{}, attribute \PYGZsq{}url\PYGZsq{} is not a vali...
          1  \PYGZsq{}document\PYGZhy{}link\PYGZsq{}, attribute \PYGZsq{}url\PYGZsq{} is not a vali...
          2  \PYGZsq{}result\PYGZsq{}: Missing child element(s), expected i...
          3  \PYGZsq{}result\PYGZsq{}: Missing child element(s), expected i...
          4  \PYGZsq{}result\PYGZsq{}: Missing child element(s), expected i...
          
                                                path  \PYGZbs{}
          0  iati\PYGZhy{}activity/1513/document\PYGZhy{}link/2/@url
          1  iati\PYGZhy{}activity/1679/document\PYGZhy{}link/3/@url
          2                   iati\PYGZhy{}activity/0/result
          3                   iati\PYGZhy{}activity/1/result
          4                 iati\PYGZhy{}activity/5/result/0
          
                                                     value
          0  http://ttp://www.snclavalin.com/fr/index.aspx
          1  http://ttp://www.snclavalin.com/fr/index.aspx
          2
          3
          4
\end{Verbatim}

If we look at the first result element, we can indeed see that it
doesn't contain an indicator element:

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [312]: }\PYG{n+nb}{print}\PYG{p}{(}
              \PYG{n}{ET}\PYG{o}{.}\PYG{n}{tostring}\PYG{p}{(}\PYG{n}{big\PYGZus{}iati}\PYG{o}{.}\PYG{n}{find}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{iati\PYGZhy{}activity/result}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{,}
                          \PYG{n}{pretty\PYGZus{}print}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}\PYG{o}{.}\PYG{n}{decode}\PYG{p}{(}\PYG{p}{)}\PYG{p}{)}
\end{Verbatim}
%
\begin{OriginalVerbatim}[commandchars=\\\{\}]
<result type="2">
  <title>
    <narrative xml:lang="en">Results Achieved</narrative>
    <narrative xml:lang="fr">R\&\#233;sultats atteints</narrative>
  </title>
  <description>
    <narrative xml:lang="en">Results as of March 31, 2011 include: the Fund delivered 62 initiatives or sub-projects before March 31, 2011. The Fund advanced public sector reform and contributed to improving the environment for business development in 13 countries in the Caribbean Region as evidenced by the following: the improvement of service delivery in the health sector, most notably the development of an Enhanced Diabetic Foot Program in Guyana; improved debt structuring and management in Antigua and Barbuda, Belize, Dominica and St. Kitts and Nevis; public sector reform in Grenada through knowledge-sharing of Canada's best practices; private-sector led growth in Jamaica and Guyana resulting in improved quality of products and marketing opportunities; and an improved rule of law in the Eastern Caribbean Supreme Court in St. Lucia that resulted in an enhanced reform agenda that included public legal education and engagement.</narrative>
    <narrative xml:lang="fr">Parmi les r\&\#233;sultats obtenus jusqu\&\#8217;au 31 mars 2011 : Le Fonds a ex\&\#233;cut\&\#233; 62 initiatives ou sous-projets avant le 31 mars 2011. Le Fonds a fait progresser la r\&\#233;forme du secteur public et a contribu\&\#233; \&\#224; am\&\#233;liorer l\&\#8217;environnement favorable au d\&\#233;veloppement commercial dans 13 pays de la r\&\#233;gion des Cara\&\#239;bes, comme les r\&\#233;sultats suivants le d\&\#233;montrent : l\&\#8217;am\&\#233;lioration de la prestation des services dans le secteur de la sant\&\#233;, plus pr\&\#233;cis\&\#233;ment l\&\#8217;\&\#233;laboration d\&\#8217;un programme am\&\#233;lior\&\#233; de soins des pieds pour les personnes atteintes de diab\&\#232;te au Guyana; l\&\#8217;am\&\#233;lioration de la structure et de la gestion de la dette \&\#224; Antigua\&\#173;et\&\#173;Barbuda, au Belize, \&\#224; la Dominique et \&\#224; Saint\&\#173;Kitts\&\#173;et\&\#173;Nevis; la r\&\#233;forme du secteur public \&\#224; la Grenade au moyen de la diffusion des pratiques exemplaires du Canada; la croissance \&\#233;conomique dirig\&\#233;e par le secteur priv\&\#233; en Jama\&\#239;que et au Guyana, qui a men\&\#233; \&\#224; l\&\#8217;am\&\#233;lioration de la qualit\&\#233; des produits et des possibilit\&\#233;s de commercialisation; l\&\#8217;am\&\#233;lioration de la primaut\&\#233; du droit \&\#224; la Cour supr\&\#234;me des Cara\&\#239;bes orientales \&\#224; Sainte\&\#173;Lucie, qui a men\&\#233; \&\#224; un programme am\&\#233;lior\&\#233; de r\&\#233;formes qui pr\&\#233;voit l\&\#8217;\&\#233;ducation et la mobilisation du public sur les questions juridiques.</narrative>
  </description>
</result>

\end{OriginalVerbatim}
% The following \relax is needed to avoid problems with adjacent ANSI
% cells and some other stuff (e.g. bullet lists) following ANSI cells.
% See https://github.com/sphinx-doc/sphinx/issues/3594
\relax

\section{Ruleset Validation}
\label{\detokenize{Global Affairs Canada - Compliance Report:Ruleset-Validation}}
There are 30 ruleset violations in total:

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [391]: }\PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{ruleset\PYGZus{}table}\PYG{p}{)}
\end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxout}{Out[391]: }30
\end{Verbatim}

Looking at the first five rows of the ruleset violations isn't
particularly informative:

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [313]: }\PYG{n}{ruleset\PYGZus{}table}\PYG{o}{.}\PYG{n}{head}\PYG{p}{(}\PYG{p}{)}
\end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxout}{Out[313]: }id                                            message  \PYGZbs{}
          0  CA\PYGZhy{}3\PYGZhy{}A034764001  {}`(recipient\PYGZhy{}country\textbar{}recipient\PYGZhy{}region)/@percent...
          1  CA\PYGZhy{}3\PYGZhy{}A035272001  {}`(recipient\PYGZhy{}country\textbar{}recipient\PYGZhy{}region)/@percent...
          2  CA\PYGZhy{}3\PYGZhy{}A035470001  {}`(recipient\PYGZhy{}country\textbar{}recipient\PYGZhy{}region)/@percent...
          3  CA\PYGZhy{}3\PYGZhy{}D002423002  {}`(recipient\PYGZhy{}country\textbar{}recipient\PYGZhy{}region)/@percent...
          4  CA\PYGZhy{}3\PYGZhy{}D004492001  {}`(recipient\PYGZhy{}country\textbar{}recipient\PYGZhy{}region)/@percent...
          
                                                          path  \PYGZbs{}
          0  /iati\PYGZhy{}activities/iati\PYGZhy{}activity[215]/recipient\PYGZhy{}...
          1  /iati\PYGZhy{}activities/iati\PYGZhy{}activity[292]/recipient\PYGZhy{}...
          2  /iati\PYGZhy{}activities/iati\PYGZhy{}activity[331]/recipient\PYGZhy{}...
          3  /iati\PYGZhy{}activities/iati\PYGZhy{}activity[952]/recipient\PYGZhy{}...
          4  /iati\PYGZhy{}activities/iati\PYGZhy{}activity[1178]/recipient...
          
                                                          rule
          0  recipient\PYGZhy{}country/@percentage and recipient\PYGZhy{}re...
          1  recipient\PYGZhy{}country/@percentage and recipient\PYGZhy{}re...
          2  recipient\PYGZhy{}country/@percentage and recipient\PYGZhy{}re...
          3  recipient\PYGZhy{}country/@percentage and recipient\PYGZhy{}re...
          4  recipient\PYGZhy{}country/@percentage and recipient\PYGZhy{}re...
\end{Verbatim}

However, by again using a pivot table and structuring the output first
by the type of rule broken, then the specifics of the violation, and
then the related activity, we can see a clearer picture:

\begin{notice}{note}{}\unskip
N.B. The table below has also been saved to Appendix 1 under the tab
`Ruleset Violations by Rule'.
\end{notice}

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [314]: }\PYG{n}{ruleset\PYGZus{}validation\PYGZus{}by\PYGZus{}rule} \PYG{o}{=} \PYG{n}{ruleset\PYGZus{}table}\PYG{o}{.}\PYG{n}{pivot\PYGZus{}table}\PYG{p}{(}
              \PYG{n}{index}\PYG{o}{=}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{rule}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{message}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{id}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{,} \PYG{n}{aggfunc}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{count}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
          
          \PYG{n}{ruleset\PYGZus{}validation\PYGZus{}by\PYGZus{}rule}\PYG{o}{.}\PYG{n}{to\PYGZus{}excel}\PYG{p}{(}\PYG{n}{pd\PYGZus{}writer}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Ruleset Violations by Rule}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
          
          \PYG{n}{ruleset\PYGZus{}validation\PYGZus{}by\PYGZus{}rule}
\end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxout}{Out[314]: }path
          rule                                               message                                            id
          activity\PYGZhy{}date[@type=\PYGZdq{}2\PYGZdq{}]/@iso\PYGZhy{}date must be befo... Start date (2007\PYGZhy{}03\PYGZhy{}27) must be before end date... CA\PYGZhy{}3\PYGZhy{}A033637001     1
                                                             Start date (2008\PYGZhy{}03\PYGZhy{}20) must be before end date... CA\PYGZhy{}3\PYGZhy{}M012715001     1
                                                             Start date (2009\PYGZhy{}01\PYGZhy{}13) must be before end date... CA\PYGZhy{}3\PYGZhy{}M012957001     1
                                                             Start date (2009\PYGZhy{}03\PYGZhy{}26) must be before end date... CA\PYGZhy{}3\PYGZhy{}M013025001     1
                                                             Start date (2009\PYGZhy{}03\PYGZhy{}27) must be before end date... CA\PYGZhy{}3\PYGZhy{}M013020001     1
                                                                                                                CA\PYGZhy{}3\PYGZhy{}M013026001     1
                                                                                                                CA\PYGZhy{}3\PYGZhy{}M013029001     1
                                                             Start date (2010\PYGZhy{}03\PYGZhy{}24) must be before end date... CA\PYGZhy{}3\PYGZhy{}M013190001     1
                                                             Start date (2010\PYGZhy{}03\PYGZhy{}25) must be before end date... CA\PYGZhy{}3\PYGZhy{}M013183001     1
                                                             Start date (2011\PYGZhy{}03\PYGZhy{}30) must be before end date... CA\PYGZhy{}3\PYGZhy{}A035214001     1
                                                             Start date (2013\PYGZhy{}01\PYGZhy{}02) must be before end date... CA\PYGZhy{}3\PYGZhy{}M013793001     1
                                                             Start date (2014\PYGZhy{}03\PYGZhy{}14) must be before end date... CA\PYGZhy{}3\PYGZhy{}D000695001     1
                                                             Start date (2014\PYGZhy{}03\PYGZhy{}28) must be before end date... CA\PYGZhy{}3\PYGZhy{}D000578001     1
          activity\PYGZhy{}date[date @type=\PYGZdq{}1\PYGZdq{}] or activity\PYGZhy{}date[... Neither activity\PYGZhy{}date[@type=\PYGZdq{}1\PYGZdq{}] nor activity\PYGZhy{}d... CA\PYGZhy{}3\PYGZhy{}A033298001     1
                                                                                                                CA\PYGZhy{}3\PYGZhy{}A034519001     1
                                                                                                                CA\PYGZhy{}3\PYGZhy{}A035113001     1
                                                                                                                CA\PYGZhy{}3\PYGZhy{}A035138001     1
                                                                                                                CA\PYGZhy{}3\PYGZhy{}D003333001     1
                                                                                                                CA\PYGZhy{}3\PYGZhy{}D004965001     1
                                                                                                                CA\PYGZhy{}3\PYGZhy{}S065691001     1
          either sector or transaction/sector must be pre... Neither sector nor transaction/sector have been... CA\PYGZhy{}3\PYGZhy{}A033944001     1
                                                                                                                CA\PYGZhy{}3\PYGZhy{}D002114001     1
          recipient\PYGZhy{}country/@percentage and recipient\PYGZhy{}reg... {}`(recipient\PYGZhy{}country\textbar{}recipient\PYGZhy{}region)/@percenta... CA\PYGZhy{}3\PYGZhy{}A034764001     1
                                                                                                                CA\PYGZhy{}3\PYGZhy{}A035272001     1
                                                                                                                CA\PYGZhy{}3\PYGZhy{}A035470001     1
                                                                                                                CA\PYGZhy{}3\PYGZhy{}D002423002     1
                                                                                                                CA\PYGZhy{}3\PYGZhy{}D004492001     1
                                                                                                                CA\PYGZhy{}3\PYGZhy{}D004499001     1
                                                                                                                CA\PYGZhy{}3\PYGZhy{}D004504001     1
                                                                                                                CA\PYGZhy{}3\PYGZhy{}D004505001     1
\end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [ ]: }\PYG{n+nb}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\end{Verbatim}

Here we can see that most of the ruleset violations have been to do with
dates - either activities starting and ending on the same day, or not
including a start date, although there are also some ruleset violations
regarding sectors and recipient countries.


\chapter{Assessing Compliance and Coverage}
\label{\detokenize{Global Affairs Canada - Compliance Report:Assessing-Compliance-and-Coverage}}
This section assesses the compliance of GAC’s data with the IATI 2.02
standard, with a specific focus on the use and coverage of all elements
of the standard (version 2.02) and adherence to rules. There is an
initial high level look at timeliness and comprehensiveness (coverage),
followed by a deeper analysis informed by 6 specified use-cases use
cases in the subsections below.

To summarise the following few sections, the IATI data published by
Global Affairs Canada performs very well on the general metrics used for
compliance. The timeliness and recency of its data is exemplary, and in
general the comprehensive use of IATI standard fields puts it at the top
five IATI publishers, \sphinxhref{http://dashboard.iatistandard.org/summary\_stats.html}{according to the IATI
Dashboard}.

This is described in more detail in the next few sections. It is
important to note, however, that just evaluating the proportion of
activities with certain fields does not elaborate on how useful the
inclusion of various fields is, hence the {\hyperref[\detokenize{Global Affairs Canada - Compliance Report:Detailed-Analysis-Method}]{\emph{use case driven approach
below}}} is required to analyse in more
depth.


\section{Initial Evaluation at Compliance and Coverage}
\label{\detokenize{Global Affairs Canada - Compliance Report:Initial-Evaluation-at-Compliance-and-Coverage}}
(Deliverable 3.1)

This section utilises the data available on the IATI Dashboard
\sphinxhref{http://dashboard.iatistandard.org/publishing\_stats.html}{Publishing
Statistics}
page, filtering and interpreting to evaluate Timeliness and Coverage. As
we see in the {\hyperref[\detokenize{Global Affairs Canada - Compliance Report:Detailed-Analysis-Method}]{\emph{sub-sections below}}}
however, the dashboard doesn't evaluate the combination of fields
required to assess some specific use cases, hence the need for more
detailed analysis.


\subsection{Timeliness}
\label{\detokenize{Global Affairs Canada - Compliance Report:Timeliness}}
Both the frequency of publication and the recency of GAC's IATI data is
exemplary, achieving the highest designation from the IATI Dasboard's
metrics:

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [378]: }\PYG{n}{timeliness} \PYG{o}{=} \PYG{n}{pd}\PYG{o}{.}\PYG{n}{read\PYGZus{}csv}\PYG{p}{(}
              \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{http://dashboard.iatistandard.org/timeliness\PYGZus{}frequency.csv}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
          
          \PYG{n}{timeliness}\PYG{p}{[}\PYG{n}{timeliness}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Publisher Registry Id}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]} \PYG{o}{==} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{gac\PYGZhy{}amc}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}
\end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxout}{Out[378]: }Publisher Name Publisher Registry Id  \PYGZbs{}
          5  Canada \PYGZhy{} Global Affairs Canada \textbar{} Affaires mond...               gac\PYGZhy{}amc
          
             2016\PYGZhy{}12  2017\PYGZhy{}01  2017\PYGZhy{}02  2017\PYGZhy{}03  2017\PYGZhy{}04  2017\PYGZhy{}05  2017\PYGZhy{}06  2017\PYGZhy{}07  \PYGZbs{}
          5        1        1       11       20        2        1        3       16
          
             2017\PYGZhy{}08  2017\PYGZhy{}09  2017\PYGZhy{}10  2017\PYGZhy{}11 Frequency
          5       13       17       12       13   Monthly
\end{Verbatim}

Although the frequency varies a lot by season, there has been consistent
publication at least once every month, achieving a score of `Monthly'
which is the highest available score on the IATI Dashboard.

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [379]: }\PYG{n}{timeliness} \PYG{o}{=} \PYG{n}{pd}\PYG{o}{.}\PYG{n}{read\PYGZus{}csv}\PYG{p}{(}
              \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{http://dashboard.iatistandard.org/timeliness\PYGZus{}timelag.csv}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
          
          \PYG{n}{timeliness}\PYG{p}{[}\PYG{n}{timeliness}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Publisher Registry Id}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]} \PYG{o}{==} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{gac\PYGZhy{}amc}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}
\end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxout}{Out[379]: }Publisher Name Publisher Registry Id  \PYGZbs{}
          11  Canada \PYGZhy{} Global Affairs Canada \textbar{} Affaires mond...               gac\PYGZhy{}amc
          
              2016\PYGZhy{}12  2017\PYGZhy{}01  2017\PYGZhy{}02  2017\PYGZhy{}03  2017\PYGZhy{}04  2017\PYGZhy{}05  2017\PYGZhy{}06  2017\PYGZhy{}07  \PYGZbs{}
          11      145      122      149      361       46      152       94       74
          
              2017\PYGZhy{}08  2017\PYGZhy{}09  2017\PYGZhy{}10  2017\PYGZhy{}11   Time lag
          11       91      105       86       98  One month
\end{Verbatim}

Again, with the Time Lag measurement, which shows the number of
transactions dated in each month, this data achieves the highest
measure. This means that the data is very up to date by the standards of
the IATI Dashboard.


\subsection{Forward Looking Data}
\label{\detokenize{Global Affairs Canada - Compliance Report:Forward-Looking-Data}}
The table below shows that GAC has gradual decline in the proportion of
activities with budgets over the course of the next three years. This
gives an average of 78\%, putting GAC at the 37th position on this metric
when compared to all IATI publishers, according to the \sphinxhref{http://dashboard.iatistandard.org/summary\_stats.html}{IATI
Dashboard}.

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [389]: }\PYG{n}{forwardlooking} \PYG{o}{=} \PYG{n}{pd}\PYG{o}{.}\PYG{n}{read\PYGZus{}csv}\PYG{p}{(}
              \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{http://dashboard.iatistandard.org/forwardlooking.csv}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
          
          \PYG{n}{forwardlooking} \PYG{o}{=} \PYG{n}{forwardlooking}\PYG{p}{[}
              \PYG{n}{forwardlooking}\PYG{o}{.}\PYG{n}{columns}\PYG{o}{.}\PYG{n}{drop}\PYG{p}{(}
                  \PYG{n+nb}{list}\PYG{p}{(}\PYG{n}{forwardlooking}\PYG{o}{.}\PYG{n}{filter}\PYG{p}{(}\PYG{n}{regex}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Current activities }\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{)}\PYG{p}{)}\PYG{p}{]}
          
          \PYG{n}{forwardlooking}\PYG{p}{[}\PYG{n}{forwardlooking}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Publisher Registry Id}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]} \PYG{o}{==} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{gac\PYGZhy{}amc}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}
\end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxout}{Out[389]: }Publisher Name Publisher Registry Id  \PYGZbs{}
          88  Canada \PYGZhy{} Global Affairs Canada \textbar{} Affaires mond...               gac\PYGZhy{}amc
          
             Percentage of current activities with budgets (2017)  \PYGZbs{}
          88                                                 95
          
             Percentage of current activities with budgets (2018)  \PYGZbs{}
          88                                                 80
          
             Percentage of current activities with budgets (2019)
          88                                                 61
\end{Verbatim}


\subsection{Coverage Of IATI Standard Elements}
\label{\detokenize{Global Affairs Canada - Compliance Report:Coverage-Of-IATI-Standard-Elements}}
The tables below show the percentage of GAC's activities which include
the fields listed in the headings. They are lifted from the IATI
Dashboard.

GAC has 100\% coverage of the core IATI Elements:

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [380]: }\PYG{n}{comprehensiveness\PYGZus{}core} \PYG{o}{=} \PYG{n}{pd}\PYG{o}{.}\PYG{n}{read\PYGZus{}csv}\PYG{p}{(}
              \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{http://dashboard.iatistandard.org/comprehensiveness\PYGZus{}core.csv}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
          
          \PYG{n}{comprehensiveness\PYGZus{}core} \PYG{o}{=} \PYG{n}{comprehensiveness\PYGZus{}core}\PYG{p}{[}
              \PYG{n}{comprehensiveness\PYGZus{}core}\PYG{o}{.}\PYG{n}{columns}\PYG{o}{.}\PYG{n}{drop}\PYG{p}{(}
                  \PYG{n+nb}{list}\PYG{p}{(}\PYG{n}{comprehensiveness\PYGZus{}core}\PYG{o}{.}\PYG{n}{filter}\PYG{p}{(}\PYG{n}{regex}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{with valid data}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{)}\PYG{p}{)}\PYG{p}{]}
          
          \PYG{n}{comprehensiveness\PYGZus{}core}\PYG{p}{[}\PYG{n}{comprehensiveness\PYGZus{}core}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Publisher Registry Id}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]} \PYG{o}{==} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{gac\PYGZhy{}amc}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}
\end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxout}{Out[380]: }Publisher Name Publisher Registry Id  \PYGZbs{}
          88  Canada \PYGZhy{} Global Affairs Canada \textbar{} Affaires mond...               gac\PYGZhy{}amc
          
             Version (with any data) Reporting\PYGZhy{}Org (with any data)  \PYGZbs{}
          88                     100                           100
          
             Iati\PYGZhy{}identifier (with any data) Participating Organisation (with any data)  \PYGZbs{}
          88                             100                                        100
          
             Title (with any data) Description (with any data) Status (with any data)  \PYGZbs{}
          88                   100                         100                    100
          
             Activity Date (with any data) Sector (with any data)  \PYGZbs{}
          88                           100                    100
          
             Country or Region (with any data)  Average (with any data)
          88                               100                      100
\end{Verbatim}

This is nearly true of the financials, though there is a slight dip in
disbursements and expenditure transactions. The IATI Dashboard doesn't
not consider \sphinxcode{planned-disbursements} which have been considered
{\hyperref[\detokenize{Global Affairs Canada - Compliance Report:Deliverable-3.1.6}]{\emph{below}}}.

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [381]: }\PYG{n}{comprehensiveness\PYGZus{}financials} \PYG{o}{=} \PYG{n}{pd}\PYG{o}{.}\PYG{n}{read\PYGZus{}csv}\PYG{p}{(}
              \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{http://dashboard.iatistandard.org/comprehensiveness\PYGZus{}financials.csv}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
          
          \PYG{n}{comprehensiveness\PYGZus{}financials} \PYG{o}{=} \PYG{n}{comprehensiveness\PYGZus{}financials}\PYG{p}{[}
              \PYG{n}{comprehensiveness\PYGZus{}financials}\PYG{o}{.}\PYG{n}{columns}\PYG{o}{.}\PYG{n}{drop}\PYG{p}{(}
                  \PYG{n+nb}{list}\PYG{p}{(}\PYG{n}{comprehensiveness\PYGZus{}financials}\PYG{o}{.}\PYG{n}{filter}\PYG{p}{(}\PYG{n}{regex}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{with valid data}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{)}\PYG{p}{)}\PYG{p}{]}
          
          \PYG{n}{comprehensiveness\PYGZus{}financials}\PYG{p}{[}\PYG{n}{comprehensiveness\PYGZus{}financials}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Publisher Registry Id}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]} \PYG{o}{==} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{gac\PYGZhy{}amc}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}
\end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxout}{Out[381]: }Publisher Name Publisher Registry Id  \PYGZbs{}
          88  Canada \PYGZhy{} Global Affairs Canada \textbar{} Affaires mond...               gac\PYGZhy{}amc
          
             Transaction \PYGZhy{} Commitment (with any data)  \PYGZbs{}
          88                                      100
          
             Transaction \PYGZhy{} Disbursement or Expenditure (with any data)  \PYGZbs{}
          88                                                 87
          
             Transaction \PYGZhy{} Traceability (with any data) Budget (with any data)  \PYGZbs{}
          88                                        100                    100
          
              Average (with any data)
          88                       97
\end{Verbatim}

With `Value Added' fields, there is a more pronounced drop. The most
significant field here is the \sphinxcode{result/indicator}. As seen in the
section on {\hyperref[\detokenize{Global Affairs Canada - Compliance Report:Schema-Valdation}]{\emph{schema validation}}} above, this causes
the majority of GAC's activities to be invalid.

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [382]: }\PYG{n}{comprehensiveness\PYGZus{}valueadded} \PYG{o}{=} \PYG{n}{pd}\PYG{o}{.}\PYG{n}{read\PYGZus{}csv}\PYG{p}{(}
              \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{http://dashboard.iatistandard.org/comprehensiveness\PYGZus{}valueadded.csv}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
          
          \PYG{n}{comprehensiveness\PYGZus{}valueadded} \PYG{o}{=} \PYG{n}{comprehensiveness\PYGZus{}valueadded}\PYG{p}{[}
              \PYG{n}{comprehensiveness\PYGZus{}valueadded}\PYG{o}{.}\PYG{n}{columns}\PYG{o}{.}\PYG{n}{drop}\PYG{p}{(}
                  \PYG{n+nb}{list}\PYG{p}{(}\PYG{n}{comprehensiveness\PYGZus{}valueadded}\PYG{o}{.}\PYG{n}{filter}\PYG{p}{(}\PYG{n}{regex}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{with valid data}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{)}\PYG{p}{)}\PYG{p}{]}
          
          \PYG{n}{comprehensiveness\PYGZus{}valueadded}\PYG{p}{[}\PYG{n}{comprehensiveness\PYGZus{}valueadded}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Publisher Registry Id}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]} \PYG{o}{==} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{gac\PYGZhy{}amc}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}
\end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxout}{Out[382]: }Publisher Name Publisher Registry Id  \PYGZbs{}
          88  Canada \PYGZhy{} Global Affairs Canada \textbar{} Affaires mond...               gac\PYGZhy{}amc
          
             Contacts (with any data) Location Details (with any data)  \PYGZbs{}
          88                      100                               95
          
             Geographic Coordinates (with any data) DAC Sectors (with any data)  \PYGZbs{}
          88                                     95                         100
          
             Capital Spend (with any data) Activity Documents (with any data)  \PYGZbs{}
          88                            23                                100
          
             Aid Type (with any data) Recipient Language (with any data)  \PYGZbs{}
          88                      100                                 55
          
             Result/ Indicator (with any data)  Average (with any data)
          88                                 0                       74
\end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [383]: }\PYG{n}{summary\PYGZus{}stats} \PYG{o}{=} \PYG{n}{pd}\PYG{o}{.}\PYG{n}{read\PYGZus{}csv}\PYG{p}{(}
              \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{http://dashboard.iatistandard.org/summary\PYGZus{}stats.csv}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
          
          \PYG{n}{summary\PYGZus{}stats} \PYG{o}{=} \PYG{n}{summary\PYGZus{}stats}\PYG{p}{[}
              \PYG{n}{summary\PYGZus{}stats}\PYG{o}{.}\PYG{n}{columns}\PYG{o}{.}\PYG{n}{drop}\PYG{p}{(}
                  \PYG{n+nb}{list}\PYG{p}{(}\PYG{n}{summary\PYGZus{}stats}\PYG{o}{.}\PYG{n}{filter}\PYG{p}{(}\PYG{n}{regex}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{with valid data}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{)}\PYG{p}{)}\PYG{p}{]}
          
          \PYG{n}{summary\PYGZus{}stats}\PYG{p}{[}\PYG{n}{summary\PYGZus{}stats}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Publisher Registry Id}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]} \PYG{o}{==} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{gac\PYGZhy{}amc}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}
\end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxout}{Out[383]: }Publisher Name Publisher Registry Id  \PYGZbs{}
          88  Canada \PYGZhy{} Global Affairs Canada \textbar{} Affaires mond...               gac\PYGZhy{}amc
          
             Publisher Type  Timeliness  Forward looking  Comprehensive  Score  \PYGZbs{}
          88     Government         100               78             92     90
          
              Coverage  Coverage\PYGZhy{}adjusted score
          88       100                       90
\end{Verbatim}


\section{Detailed Analysis Method}
\label{\detokenize{Global Affairs Canada - Compliance Report:Detailed-Analysis-Method}}
Each of the deliverables below corresponds to a use case, around which
compliance and coverage is framed. These are reflected in the `Use Case'
section which opens each of them.

The analytical approaches employed have varied by deliverable, and have
generally been grounded in initial exploratory analysis and built
depending on the findings.

All of the code is visible, so scrutiny on the methods is encouraged.


\section{Deliverable 3.1.1}
\label{\detokenize{Global Affairs Canada - Compliance Report:Deliverable-3.1.1}}

\subsection{Use Case}
\label{\detokenize{Global Affairs Canada - Compliance Report:Use-Case}}
\sphinxstyleemphasis{Identify projects in specific countries, with specific partners, with
specific types of partners (eg multilateral organisations, CSOs, private
sector)}

This section analyses the existence and coverage of the relevant fields:
recipient countries, participating organisations, participating
organisation (type and role).

First, let's extract some information about the fields we're interested
in, namely recipient countries and participating organisations.

The table below extracted below shows, for each activity, how many
instances of each field there are. This will gives us a first pass, and
allows us to make more opinionated analyses subsequently.

\begin{notice}{note}{}\unskip
\sphinxstylestrong{Note}: Although recipient regions aren't the focus of this
deliverable, they've been included to help analysis of recipient country
below. Please also note that this table has been included in the
Appendix Workbook
\end{notice}

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [384]: }\PYG{n}{locations\PYGZus{}and\PYGZus{}partners} \PYG{o}{=} \PYG{n}{pd}\PYG{o}{.}\PYG{n}{DataFrame}\PYG{p}{(}
              \PYG{n}{columns}\PYG{o}{=}\PYG{p}{[}
                  \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{iati\PYGZhy{}identifier}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
                  \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{activity\PYGZhy{}status}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
                  \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{recipient\PYGZhy{}country\PYGZhy{}count}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
                  \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{recipient\PYGZhy{}region\PYGZhy{}count}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
                  \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{participating\PYGZhy{}organisation\PYGZhy{}count}\PYG{l+s+s1}{\PYGZsq{}}
              \PYG{p}{]}\PYG{p}{,}
              \PYG{n}{data}\PYG{o}{=}\PYG{p}{[}\PYG{p}{[}
                  \PYG{n}{activity}\PYG{o}{.}\PYG{n}{find}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{iati\PYGZhy{}identifier}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{o}{.}\PYG{n}{text}\PYG{p}{,}
                  \PYG{n}{activity}\PYG{o}{.}\PYG{n}{find}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{activity\PYGZhy{}status}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{o}{.}\PYG{n}{get}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{code}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{,}
                  \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{activity}\PYG{o}{.}\PYG{n}{findall}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{recipient\PYGZhy{}country}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{)}\PYG{p}{,}
                  \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{activity}\PYG{o}{.}\PYG{n}{findall}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{recipient\PYGZhy{}region}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{)}\PYG{p}{,}
                  \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{activity}\PYG{o}{.}\PYG{n}{findall}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{participating\PYGZhy{}org}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{)}
              \PYG{p}{]} \PYG{k}{for} \PYG{n}{activity} \PYG{o+ow}{in} \PYG{n}{big\PYGZus{}iati}\PYG{o}{.}\PYG{n}{findall}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{iati\PYGZhy{}activity}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
          
          \PYG{n}{locations\PYGZus{}and\PYGZus{}partners}\PYG{o}{.}\PYG{n}{to\PYGZus{}excel}\PYG{p}{(}\PYG{n}{pd\PYGZus{}writer}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Locations and Partners}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
          
          \PYG{n}{locations\PYGZus{}and\PYGZus{}partners}\PYG{o}{.}\PYG{n}{head}\PYG{p}{(}\PYG{p}{)}
\end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxout}{Out[384]: }iati\PYGZhy{}identifier activity\PYGZhy{}status  recipient\PYGZhy{}country\PYGZhy{}count  \PYGZbs{}
          0  CA\PYGZhy{}3\PYGZhy{}A031268001               3                       12
          1  CA\PYGZhy{}3\PYGZhy{}A031470001               2                        1
          2  CA\PYGZhy{}3\PYGZhy{}A031708001               2                        1
          3  CA\PYGZhy{}3\PYGZhy{}A031708003               3                        1
          4  CA\PYGZhy{}3\PYGZhy{}A031717001               3                        1
          
             recipient\PYGZhy{}region\PYGZhy{}count  participating\PYGZhy{}organisation\PYGZhy{}count
          0                       0                                 3
          1                       0                                 3
          2                       0                                 3
          3                       0                                 3
          4                       0                                 3
\end{Verbatim}

Now, we can use the `describe' cuntion to analyse this distribution

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [385]: }\PYG{n}{locations\PYGZus{}and\PYGZus{}partners}\PYG{o}{.}\PYG{n}{describe}\PYG{p}{(}\PYG{p}{)}
\end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxout}{Out[385]: }recipient\PYGZhy{}country\PYGZhy{}count  recipient\PYGZhy{}region\PYGZhy{}count  \PYGZbs{}
          count              3961.000000              3961.00000
          mean                  2.696289                 0.44307
          std                   9.298740                 1.15179
          min                   0.000000                 0.00000
          25\PYGZpc{}                   1.000000                 0.00000
          50\PYGZpc{}                   1.000000                 0.00000
          75\PYGZpc{}                   1.000000                 0.00000
          max                 148.000000                 5.00000
          
                 participating\PYGZhy{}organisation\PYGZhy{}count
          count                            3961.0
          mean                                3.0
          std                                 0.0
          min                                 3.0
          25\PYGZpc{}                                 3.0
          50\PYGZpc{}                                 3.0
          75\PYGZpc{}                                 3.0
          max                                 3.0
\end{Verbatim}

The key things to observe here are as follows:
\begin{itemize}
\item {} 
There are exactly three participating organisation elements in every
element (max = 3; min = 3). This will allow a more opinionated
analysis below.

\item {} 
Although the mean number of recipient countries provided is around 3,
there is a lot of variation, and there are some with none, and at
least one with 0 and one with 148. Again, this guides analysis below.

\item {} 
The two middle quartiles are constituted entirely of activities with
one recipient country.

\end{itemize}


\subsection{Recipient Countries}
\label{\detokenize{Global Affairs Canada - Compliance Report:Recipient-Countries}}
To get more of a sense of the distribution of recipient country
coverage, let's use a histogram.

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [317]: }\PYG{n}{p1} \PYG{o}{=} \PYG{n}{Histogram}\PYG{p}{(} \PYG{n}{locations\PYGZus{}and\PYGZus{}partners}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{recipient\PYGZhy{}country\PYGZhy{}count}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
                  \PYG{n}{title} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Histogram of Recipient Country Counts}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{bins}\PYG{o}{=}\PYG{l+m+mi}{150}\PYG{p}{)}
          
          \PYG{n}{show}\PYG{p}{(}\PYG{n}{p1}\PYG{p}{)}
\end{Verbatim}

Here we can see that indeed, the vast majority of activities have one
recipient country. However, over 500 do not.

These might have a recipient region associated, so let's see if there
are any activities which have neither by filtering the above table to
include only rows which have none of either:

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [318]: }\PYG{n}{locations\PYGZus{}and\PYGZus{}partners}\PYG{p}{[}
              \PYG{p}{(}\PYG{n}{locations\PYGZus{}and\PYGZus{}partners}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{recipient\PYGZhy{}country\PYGZhy{}count}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]} \PYG{o}{==} \PYG{l+m+mi}{0}\PYG{p}{)} \PYG{o}{\PYGZam{}}
              \PYG{p}{(}\PYG{n}{locations\PYGZus{}and\PYGZus{}partners}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{recipient\PYGZhy{}region\PYGZhy{}count}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]} \PYG{o}{==} \PYG{l+m+mi}{0}\PYG{p}{)}\PYG{p}{]}\PYG{o}{.}\PYG{n}{head}\PYG{p}{(}\PYG{p}{)}
\end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxout}{Out[318]: }iati\PYGZhy{}identifier activity\PYGZhy{}status  recipient\PYGZhy{}country\PYGZhy{}count  \PYGZbs{}
          146  CA\PYGZhy{}3\PYGZhy{}A033944001               2                        0
          856  CA\PYGZhy{}3\PYGZhy{}D002114001               3                        0
          
               recipient\PYGZhy{}region\PYGZhy{}count  participating\PYGZhy{}organisation\PYGZhy{}count
          146                       0                                 3
          856                       0                                 3
\end{Verbatim}

As we can see, there are in fact only two activities which have neither
element.

Let's also look at the activities which have a very high number of
recipient countries, using 50 arbitrarily:

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [319]: }\PYG{n}{locations\PYGZus{}and\PYGZus{}partners}\PYG{p}{[}\PYG{n}{locations\PYGZus{}and\PYGZus{}partners}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{recipient\PYGZhy{}country\PYGZhy{}count}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]} \PYG{o}{\PYGZgt{}} \PYG{l+m+mi}{50}\PYG{p}{]}
\end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxout}{Out[319]: }iati\PYGZhy{}identifier activity\PYGZhy{}status  recipient\PYGZhy{}country\PYGZhy{}count  \PYGZbs{}
          358   CA\PYGZhy{}3\PYGZhy{}A035580001               3                      133
          564   CA\PYGZhy{}3\PYGZhy{}D000114001               2                       66
          666   CA\PYGZhy{}3\PYGZhy{}D000514001               2                      132
          667   CA\PYGZhy{}3\PYGZhy{}D000514002               3                      132
          731   CA\PYGZhy{}3\PYGZhy{}D000942001               2                      133
          931   CA\PYGZhy{}3\PYGZhy{}D002306001               2                      115
          959   CA\PYGZhy{}3\PYGZhy{}D002455001               2                      138
          1652  CA\PYGZhy{}3\PYGZhy{}A033536001               4                       53
          1653  CA\PYGZhy{}3\PYGZhy{}A033536002               4                       53
          1740  CA\PYGZhy{}3\PYGZhy{}A033975001               4                       52
          1741  CA\PYGZhy{}3\PYGZhy{}A033975002               4                       52
          2142  CA\PYGZhy{}3\PYGZhy{}D000360001               4                      148
          2304  CA\PYGZhy{}3\PYGZhy{}D000731001               4                      132
          2484  CA\PYGZhy{}3\PYGZhy{}M012575002               4                       87
          2504  CA\PYGZhy{}3\PYGZhy{}M012660001               4                       53
          2596  CA\PYGZhy{}3\PYGZhy{}M012870001               4                       53
          2597  CA\PYGZhy{}3\PYGZhy{}M012870002               4                       53
          2628  CA\PYGZhy{}3\PYGZhy{}M012912001               4                       53
          2631  CA\PYGZhy{}3\PYGZhy{}M012918002               4                      122
          2920  CA\PYGZhy{}3\PYGZhy{}M013279001               4                      143
          2943  CA\PYGZhy{}3\PYGZhy{}M013303001               4                      130
          3050  CA\PYGZhy{}3\PYGZhy{}M013420001               4                      138
          3058  CA\PYGZhy{}3\PYGZhy{}M013432001               4                      130
          3352  CA\PYGZhy{}3\PYGZhy{}M013784001               4                      132
          3480  CA\PYGZhy{}3\PYGZhy{}S061266PRG               4                       56
          
                recipient\PYGZhy{}region\PYGZhy{}count  participating\PYGZhy{}organisation\PYGZhy{}count
          358                        0                                 3
          564                        0                                 3
          666                        0                                 3
          667                        0                                 3
          731                        0                                 3
          931                        0                                 3
          959                        0                                 3
          1652                       0                                 3
          1653                       0                                 3
          1740                       1                                 3
          1741                       1                                 3
          2142                       0                                 3
          2304                       0                                 3
          2484                       0                                 3
          2504                       0                                 3
          2596                       0                                 3
          2597                       0                                 3
          2628                       0                                 3
          2631                       0                                 3
          2920                       1                                 3
          2943                       0                                 3
          3050                       0                                 3
          3058                       0                                 3
          3352                       0                                 3
          3480                       0                                 3
\end{Verbatim}

Although it is very possible that these activities are legitimately
benefiting each between 50 and 150 countries, this does make any kind of
detailed analysis more difficult.


\subsection{Participating Organisations}
\label{\detokenize{Global Affairs Canada - Compliance Report:Participating-Organisations}}
To look in more detail, let's create a new table of all of the
participating organisation details:

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [320]: }\PYG{n}{detailed\PYGZus{}participating\PYGZus{}orgs} \PYG{o}{=} \PYG{n}{pd}\PYG{o}{.}\PYG{n}{DataFrame}\PYG{p}{(}
              \PYG{n}{columns}\PYG{o}{=}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{iati\PYGZhy{}identifier}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{ref}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{name}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{type}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{role}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{,}
              \PYG{n}{data}\PYG{o}{=}\PYG{p}{[}\PYG{p}{[}
                  \PYG{n}{participating\PYGZus{}org}\PYG{o}{.}\PYG{n}{getparent}\PYG{p}{(}\PYG{p}{)}\PYG{o}{.}\PYG{n}{find}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{iati\PYGZhy{}identifier}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{o}{.}\PYG{n}{text}\PYG{p}{,}
                  \PYG{n}{participating\PYGZus{}org}\PYG{o}{.}\PYG{n}{get}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{ref}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{,}
                  \PYG{n}{participating\PYGZus{}org}\PYG{o}{.}\PYG{n}{find}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{narrative}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{o}{.}\PYG{n}{text}\PYG{p}{,}
                  \PYG{n}{participating\PYGZus{}org}\PYG{o}{.}\PYG{n}{get}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{type}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{,}
                  \PYG{n}{participating\PYGZus{}org}\PYG{o}{.}\PYG{n}{get}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{role}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
              \PYG{p}{]}
                    \PYG{k}{for} \PYG{n}{participating\PYGZus{}org} \PYG{o+ow}{in} \PYG{n}{big\PYGZus{}iati}\PYG{o}{.}\PYG{n}{findall}\PYG{p}{(}
                        \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{iati\PYGZhy{}activity/participating\PYGZhy{}org}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
          
          \PYG{n}{detailed\PYGZus{}participating\PYGZus{}orgs}\PYG{o}{.}\PYG{n}{to\PYGZus{}excel}\PYG{p}{(}\PYG{n}{pd\PYGZus{}writer}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Participating Organisations}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
          
          \PYG{n}{detailed\PYGZus{}participating\PYGZus{}orgs}\PYG{o}{.}\PYG{n}{head}\PYG{p}{(}\PYG{p}{)}
\end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxout}{Out[320]: }iati\PYGZhy{}identifier   ref                                               name  \PYGZbs{}
          0  CA\PYGZhy{}3\PYGZhy{}A031268001    CA                                             Canada
          1  CA\PYGZhy{}3\PYGZhy{}A031268001  CA\PYGZhy{}1          Canadian International Development Agency
          2  CA\PYGZhy{}3\PYGZhy{}A031268001  None  Public Works and Government Services Canada \PYGZhy{} ...
          3  CA\PYGZhy{}3\PYGZhy{}A031470001    CA                                             Canada
          4  CA\PYGZhy{}3\PYGZhy{}A031470001  CA\PYGZhy{}1          Canadian International Development Agency
          
            type role
          0   10    1
          1   10    3
          2   10    4
          3   10    1
          4   10    3
\end{Verbatim}

Again, looking at the first five rows, this table isn't particularly
informative, and we know that currently a row row for each activity. To
give a clearer picture, let's reformat this table to show the number of
\sphinxcode{reporting-org} elements given, broken down by the organisation role,
and then type.

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [321]: }\PYG{n}{detailed\PYGZus{}participating\PYGZus{}orgs}\PYG{o}{.}\PYG{n}{pivot\PYGZus{}table}\PYG{p}{(}
              \PYG{n}{index}\PYG{o}{=}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{role}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{type}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{,} \PYG{n}{aggfunc}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{count}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxout}{Out[321]: }iati\PYGZhy{}identifier  name   ref
          role type
          1    10               3961  3961  3961
          3    10               3961  3961  3961
          4    10                446   446    63
               21                455   455   375
               22               1225  1225  1049
               30                  6     6     4
               40               1405  1405  1234
               70                135   135   116
\end{Verbatim}

For every \sphinxcode{participating-org} given a role of either Funding or
Extending, all of the fields have been provided.

Because there are more types of organisation which have played an
`Implementing' role, let's collapse them down:

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [322]: }\PYG{n}{detailed\PYGZus{}participating\PYGZus{}orgs}\PYG{o}{.}\PYG{n}{pivot\PYGZus{}table}\PYG{p}{(}\PYG{n}{index}\PYG{o}{=}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{role}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{,} \PYG{n}{aggfunc}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{count}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxout}{Out[322]: }iati\PYGZhy{}identifier  name   ref  type
          role
          1                3961  3961  3961  3961
          3                3961  3961  3961  3961
          4                3961  3961  2985  3672
\end{Verbatim}

Looking at the `ref' and `type' values for the bottom row, it can be
seen that 976 (24.64\%) Implementing organisation declarations have no
identifying reference, and 289 (7.30\%) have no type declared. the
identifiers for these activities can be found by filtering the
`Participating Organisations' tab of Appendix 1.


\section{Deliverable 3.1.2}
\label{\detokenize{Global Affairs Canada - Compliance Report:Deliverable-3.1.2}}

\subsection{Use Case}
\label{\detokenize{Global Affairs Canada - Compliance Report:Use-Case}}
\sphinxstyleemphasis{Identify local partners by relating the project’s implementing
Organisation Identifier and the beneficiary country}

The aim of this section is to analyse the structure of the IATI
activities and their fields to assess the feasibility of this kind of
inference.


\subsection{Existence of Required Fields}
\label{\detokenize{Global Affairs Canada - Compliance Report:Existence-of-Required-Fields}}
The most obvious impediment to this inference is the lack of either a
recipient country code, or an implementing organisation's reference.

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [323]: }\PYG{n}{implementers\PYGZus{}without\PYGZus{}ref} \PYG{o}{=} \PYG{n}{big\PYGZus{}iati}\PYG{o}{.}\PYG{n}{xpath}\PYG{p}{(}
              \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{iati\PYGZhy{}activity[participating\PYGZhy{}org[@role=}\PYG{l+s+s2}{\PYGZsq{}}\PYG{l+s+s2}{4}\PYG{l+s+s2}{\PYGZsq{}}\PYG{l+s+s2}{ and not(@ref)]]}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
          
          \PYG{n}{activities\PYGZus{}without\PYGZus{}country} \PYG{o}{=} \PYG{n}{big\PYGZus{}iati}\PYG{o}{.}\PYG{n}{xpath}\PYG{p}{(}
              \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{iati\PYGZhy{}activity[not(recipient\PYGZhy{}country)]}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
          
          \PYG{n}{total\PYGZus{}non\PYGZus{}inference} \PYG{o}{=} \PYG{n}{implementers\PYGZus{}without\PYGZus{}ref} \PYG{o}{+} \PYG{n}{activities\PYGZus{}without\PYGZus{}country}
          
          \PYG{n+nb}{print}\PYG{p}{(}
              \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Generated Text: }\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{Of the the }\PYG{l+s+si}{\PYGZob{}\PYGZcb{}}\PYG{l+s+s2}{ activities published, }\PYG{l+s+si}{\PYGZob{}\PYGZcb{}}\PYG{l+s+s2}{ (}\PYG{l+s+si}{\PYGZob{}:.2\PYGZpc{}\PYGZcb{}}\PYG{l+s+s2}{) do not include a recipient country.}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}}
              \PYG{o}{.}\PYG{n}{format}\PYG{p}{(}
                  \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{big\PYGZus{}iati}\PYG{p}{)}\PYG{p}{,} \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{activities\PYGZus{}without\PYGZus{}country}\PYG{p}{)}\PYG{p}{,}
                  \PYG{p}{(}\PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{activities\PYGZus{}without\PYGZus{}country}\PYG{p}{)} \PYG{o}{/} \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{big\PYGZus{}iati}\PYG{p}{)}\PYG{p}{)}\PYG{p}{)}\PYG{p}{)}
          
          \PYG{n+nb}{print}\PYG{p}{(}
              \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{All of the }\PYG{l+s+si}{\PYGZob{}\PYGZcb{}}\PYG{l+s+s2}{ activities analysed include an implementing organisation.}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}}
              \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Of those however, }\PYG{l+s+si}{\PYGZob{}\PYGZcb{}}\PYG{l+s+s2}{ (}\PYG{l+s+si}{\PYGZob{}:.2\PYGZpc{}\PYGZcb{}}\PYG{l+s+s2}{) of them do not include a reference.}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}}
              \PYG{o}{.}\PYG{n}{format}\PYG{p}{(}
                  \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{big\PYGZus{}iati}\PYG{p}{)}\PYG{p}{,} \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{implementers\PYGZus{}without\PYGZus{}ref}\PYG{p}{)}\PYG{p}{,}
                  \PYG{p}{(}\PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{implementers\PYGZus{}without\PYGZus{}ref}\PYG{p}{)} \PYG{o}{/} \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{big\PYGZus{}iati}\PYG{p}{)}\PYG{p}{)}\PYG{p}{)}\PYG{p}{)}
          
          \PYG{n+nb}{print}\PYG{p}{(}
              \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Of the }\PYG{l+s+si}{\PYGZob{}\PYGZcb{}}\PYG{l+s+s2}{ activities identified in the above procedures, }\PYG{l+s+si}{\PYGZob{}\PYGZcb{}}\PYG{l+s+s2}{ (}\PYG{l+s+si}{\PYGZob{}:.2\PYGZpc{}\PYGZcb{}}\PYG{l+s+s2}{ of the all activities) are unique.}\PYG{l+s+s2}{\PYGZdq{}}
              \PYG{o}{.}\PYG{n}{format}\PYG{p}{(}
                  \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{total\PYGZus{}non\PYGZus{}inference}\PYG{p}{)}\PYG{p}{,} \PYG{n+nb}{len}\PYG{p}{(}\PYG{n+nb}{set}\PYG{p}{(}\PYG{n}{total\PYGZus{}non\PYGZus{}inference}\PYG{p}{)}\PYG{p}{)}\PYG{p}{,}
                  \PYG{n+nb}{len}\PYG{p}{(}\PYG{n+nb}{set}\PYG{p}{(}\PYG{n}{total\PYGZus{}non\PYGZus{}inference}\PYG{p}{)}\PYG{p}{)} \PYG{o}{/} \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{big\PYGZus{}iati}\PYG{p}{)}\PYG{p}{)}\PYG{p}{)}
\end{Verbatim}
%
\begin{OriginalVerbatim}[commandchars=\\\{\}]
Generated Text:

Of the the 3961 activities published, 572 (14.44\%) do not include a recipient country.

All of the 3961 activities analysed include an implementing organisation.
Of those however, 976 (24.64\%) of them do not include a reference.

Of the 1548 activities identified in the above procedures, 1439 (36.33\% of the all activities) are unique.
\end{OriginalVerbatim}
% The following \relax is needed to avoid problems with adjacent ANSI
% cells and some other stuff (e.g. bullet lists) following ANSI cells.
% See https://github.com/sphinx-doc/sphinx/issues/3594
\relax
This is to say that for the set of activities analysed in this report,
it is impossible to make this inference for over a third of them just in
virtue of the necessary fields not being present.


\subsection{How the Required Fields are Related}
\label{\detokenize{Global Affairs Canada - Compliance Report:How-the-Required-Fields-are-Related}}
Another way of assessing the possibility of this inference is to look
structurally at the way these elements are used together. To begin with
we make a table of all of the recipient countries declared in
activities, along with the corresponding implementing organisation
information published in their parent activity.

Let's look at what the fields look like, starting with the recipient
country field. Here are three arbitrarily chosen recipient country
elements:

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [324]: }\PYG{k}{for} \PYG{n}{xml\PYGZus{}recipient\PYGZus{}country} \PYG{o+ow}{in} \PYG{n}{big\PYGZus{}iati}\PYG{o}{.}\PYG{n}{findall}\PYG{p}{(}
                  \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{iati\PYGZhy{}activity/recipient\PYGZhy{}country}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{[}\PYG{l+m+mi}{520}\PYG{p}{:}\PYG{l+m+mi}{523}\PYG{p}{]}\PYG{p}{:}
          
              \PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{ET}\PYG{o}{.}\PYG{n}{tostring}\PYG{p}{(}\PYG{n}{xml\PYGZus{}recipient\PYGZus{}country}\PYG{p}{,} \PYG{n}{pretty\PYGZus{}print}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}\PYG{o}{.}\PYG{n}{decode}\PYG{p}{(}\PYG{p}{)}\PYG{p}{)}
\end{Verbatim}
%
\begin{OriginalVerbatim}[commandchars=\\\{\}]
<recipient-country percentage="100" code="SN"/>

<recipient-country percentage="100" code="HT"/>

<recipient-country percentage="100" code="HT"/>

\end{OriginalVerbatim}
% The following \relax is needed to avoid problems with adjacent ANSI
% cells and some other stuff (e.g. bullet lists) following ANSI cells.
% See https://github.com/sphinx-doc/sphinx/issues/3594
\relax
Let's now look at the implementing participating organisation element in
the dataset, which includes all of the available fields:

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [325]: }\PYG{n+nb}{print}\PYG{p}{(}
              \PYG{n}{ET}\PYG{o}{.}\PYG{n}{tostring}\PYG{p}{(}
                  \PYG{n}{big\PYGZus{}iati}\PYG{o}{.}\PYG{n}{xpath}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{iati\PYGZhy{}activity/participating\PYGZhy{}org[@role=}\PYG{l+s+s2}{\PYGZsq{}}\PYG{l+s+s2}{4}\PYG{l+s+s2}{\PYGZsq{}}\PYG{l+s+s2}{ and @ref]}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{[}\PYG{l+m+mi}{3}\PYG{p}{]}\PYG{p}{,}
                  \PYG{n}{pretty\PYGZus{}print}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}\PYG{o}{.}\PYG{n}{decode}\PYG{p}{(}\PYG{p}{)}\PYG{p}{)}
\end{Verbatim}
%
\begin{OriginalVerbatim}[commandchars=\\\{\}]
<participating-org role="4" ref="CA-CRA\_ACR-3118929157" type="22">
  <narrative xml:lang="en">FIT - Foundation for International Training </narrative>
  <narrative xml:lang="fr">FIT - Foundation for International Training </narrative>
</participating-org>

\end{OriginalVerbatim}
% The following \relax is needed to avoid problems with adjacent ANSI
% cells and some other stuff (e.g. bullet lists) following ANSI cells.
% See https://github.com/sphinx-doc/sphinx/issues/3594
\relax
Every row in the table below corresponds to a single declaration of a
recipient country, so there is a lot of duplication of activity
identifiers and implementing organisations, but this is necessary for
subsequent analysis.

Again, here are the first five rows:

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [326]: }\PYG{n}{implementers\PYGZus{}concise} \PYG{o}{=} \PYG{n}{pd}\PYG{o}{.}\PYG{n}{DataFrame}\PYG{p}{(}
              \PYG{n}{columns}\PYG{o}{=}\PYG{p}{[}
                  \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{iati\PYGZhy{}identifier}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{implementing\PYGZhy{}org\PYGZhy{}name}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{implementing\PYGZhy{}org\PYGZhy{}ref}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
                  \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{recipient\PYGZhy{}country\PYGZhy{}code}\PYG{l+s+s1}{\PYGZsq{}}
              \PYG{p}{]}\PYG{p}{,}
              \PYG{n}{data}\PYG{o}{=}\PYG{p}{[}\PYG{p}{[}
                  \PYG{n}{country}\PYG{o}{.}\PYG{n}{getparent}\PYG{p}{(}\PYG{p}{)}\PYG{o}{.}\PYG{n}{find}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{iati\PYGZhy{}identifier}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{o}{.}\PYG{n}{text}\PYG{p}{,}
                  \PYG{n}{country}\PYG{o}{.}\PYG{n}{getparent}\PYG{p}{(}\PYG{p}{)}\PYG{o}{.}\PYG{n}{xpath}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{participating\PYGZhy{}org[@role=}\PYG{l+s+s2}{\PYGZsq{}}\PYG{l+s+s2}{4}\PYG{l+s+s2}{\PYGZsq{}}\PYG{l+s+s2}{]}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{o}{.}\PYG{n}{find}\PYG{p}{(}
                      \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{narrative}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{o}{.}\PYG{n}{text}\PYG{p}{,}
                  \PYG{n}{country}\PYG{o}{.}\PYG{n}{getparent}\PYG{p}{(}\PYG{p}{)}\PYG{o}{.}\PYG{n}{xpath}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{participating\PYGZhy{}org[@role=}\PYG{l+s+s2}{\PYGZsq{}}\PYG{l+s+s2}{4}\PYG{l+s+s2}{\PYGZsq{}}\PYG{l+s+s2}{]}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{o}{.}\PYG{n}{get}\PYG{p}{(}
                      \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{ref}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{,}
                  \PYG{n}{country}\PYG{o}{.}\PYG{n}{get}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{code}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
              \PYG{p}{]} \PYG{k}{for} \PYG{n}{country} \PYG{o+ow}{in} \PYG{n}{big\PYGZus{}iati}\PYG{o}{.}\PYG{n}{findall}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{iati\PYGZhy{}activity/recipient\PYGZhy{}country}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
          
          \PYG{n}{implementers\PYGZus{}concise}\PYG{o}{.}\PYG{n}{head}\PYG{p}{(}\PYG{p}{)}
\end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxout}{Out[326]: }iati\PYGZhy{}identifier                              implementing\PYGZhy{}org\PYGZhy{}name  \PYGZbs{}
          0  CA\PYGZhy{}3\PYGZhy{}A031268001  Public Works and Government Services Canada \PYGZhy{} ...
          1  CA\PYGZhy{}3\PYGZhy{}A031268001  Public Works and Government Services Canada \PYGZhy{} ...
          2  CA\PYGZhy{}3\PYGZhy{}A031268001  Public Works and Government Services Canada \PYGZhy{} ...
          3  CA\PYGZhy{}3\PYGZhy{}A031268001  Public Works and Government Services Canada \PYGZhy{} ...
          4  CA\PYGZhy{}3\PYGZhy{}A031268001  Public Works and Government Services Canada \PYGZhy{} ...
          
            implementing\PYGZhy{}org\PYGZhy{}ref recipient\PYGZhy{}country\PYGZhy{}code
          0                 None                     AG
          1                 None                     AI
          2                 None                     BZ
          3                 None                     DM
          4                 None                     GD
\end{Verbatim}

Again, on its own this table doesn't pain a clear picture, but we can
manipulate it to see the number of activities, unique names, an unique
countries associated with each \sphinxcode{implementing-org}. This list is very
long, but this time looking at the first five rows gives more insight:

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [327]: }\PYG{n}{unique\PYGZus{}countries\PYGZus{}per\PYGZus{}organisation} \PYG{o}{=} \PYG{n}{implementers\PYGZus{}concise}\PYG{o}{.}\PYG{n}{pivot\PYGZus{}table}\PYG{p}{(}
              \PYG{n}{index}\PYG{o}{=}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{implementing\PYGZhy{}org\PYGZhy{}ref}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{,} \PYG{n}{aggfunc}\PYG{o}{=}\PYG{k}{lambda} \PYG{n}{x}\PYG{p}{:} \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{x}\PYG{o}{.}\PYG{n}{unique}\PYG{p}{(}\PYG{p}{)}\PYG{p}{)}\PYG{p}{)}
          
          \PYG{n}{unique\PYGZus{}countries\PYGZus{}per\PYGZus{}organisation}\PYG{o}{.}\PYG{n}{columns} \PYG{o}{=} \PYG{p}{[}
              \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{unique\PYGZhy{}iati\PYGZhy{}identifier\PYGZhy{}count}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{unique\PYGZhy{}implementing\PYGZhy{}org\PYGZhy{}name\PYGZhy{}count}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
              \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{unique\PYGZhy{}recipient\PYGZhy{}country\PYGZhy{}code\PYGZhy{}count}\PYG{l+s+s1}{\PYGZsq{}}
          \PYG{p}{]}
          
          \PYG{n}{unique\PYGZus{}countries\PYGZus{}per\PYGZus{}organisation}\PYG{o}{.}\PYG{n}{head}\PYG{p}{(}\PYG{p}{)}
\end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxout}{Out[327]: }unique\PYGZhy{}iati\PYGZhy{}identifier\PYGZhy{}count  \PYGZbs{}
          implementing\PYGZhy{}org\PYGZhy{}ref
          21009                                            1
          21016                                           80
          21018                                           41
          21020                                            1
          21023                                            1
          
                                unique\PYGZhy{}implementing\PYGZhy{}org\PYGZhy{}name\PYGZhy{}count  \PYGZbs{}
          implementing\PYGZhy{}org\PYGZhy{}ref
          21009                                                  1
          21016                                                  3
          21018                                                  3
          21020                                                  1
          21023                                                  1
          
                                unique\PYGZhy{}recipient\PYGZhy{}country\PYGZhy{}code\PYGZhy{}count
          implementing\PYGZhy{}org\PYGZhy{}ref
          21009                                                  52
          21016                                                  70
          21018                                                  39
          21020                                                  41
          21023                                                   5
\end{Verbatim}

If the consider the second row of this table, this tells us that the
reference `21016' has been used in 80 different activities, alongside 3
different names, and has been the implementing organisation for 70
distinct recipient countries.

This organisation is the ICRC - the three organisation names which have
been used are as follows:

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [328]: }\PYG{k}{for} \PYG{n}{name} \PYG{o+ow}{in} \PYG{n+nb}{set}\PYG{p}{(}\PYG{n}{implementers\PYGZus{}concise}\PYG{p}{[}\PYG{n}{implementers\PYGZus{}concise}\PYG{p}{[}
                  \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{implementing\PYGZhy{}org\PYGZhy{}ref}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]} \PYG{o}{==} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{21016}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{implementing\PYGZhy{}org\PYGZhy{}name}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{)}\PYG{p}{:}
              \PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{name}\PYG{p}{)}
\end{Verbatim}
%
\begin{OriginalVerbatim}[commandchars=\\\{\}]
ICRC - International Committee of the Red Cross
Red Cross International Aid Trust of Canada
International Committee of the Red Cross (ICRC) Appeals via the Canadian Red Cross Society (CRCS)
\end{OriginalVerbatim}
% The following \relax is needed to avoid problems with adjacent ANSI
% cells and some other stuff (e.g. bullet lists) following ANSI cells.
% See https://github.com/sphinx-doc/sphinx/issues/3594
\relax
Following the same approach used above, let's look at the distribution
of these counts:

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [329]: }\PYG{n}{unique\PYGZus{}countries\PYGZus{}per\PYGZus{}organisation}\PYG{o}{.}\PYG{n}{describe}\PYG{p}{(}\PYG{p}{)}
\end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxout}{Out[329]: }unique\PYGZhy{}iati\PYGZhy{}identifier\PYGZhy{}count  unique\PYGZhy{}implementing\PYGZhy{}org\PYGZhy{}name\PYGZhy{}count  \PYGZbs{}
          count                    392.000000                          392.000000
          mean                       6.433673                            1.130102
          std                       19.229418                            0.590558
          min                        1.000000                            1.000000
          25\PYGZpc{}                        1.000000                            1.000000
          50\PYGZpc{}                        2.000000                            1.000000
          75\PYGZpc{}                        4.000000                            1.000000
          max                      240.000000                            9.000000
          
                 unique\PYGZhy{}recipient\PYGZhy{}country\PYGZhy{}code\PYGZhy{}count
          count                           392.000000
          mean                             10.836735
          std                              20.409713
          min                               1.000000
          25\PYGZpc{}                               1.000000
          50\PYGZpc{}                               4.000000
          75\PYGZpc{}                              10.000000
          max                             149.000000
\end{Verbatim}

Looking at the recipient country code figures, we can see that the mean
is 10 distinct countries, and the median is 4, with a maximum of 149.
This indicates a similar distribution as before, so let's confirm with
another histogram:

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [330]: }\PYG{n}{p2} \PYG{o}{=} \PYG{n}{Histogram}\PYG{p}{(}\PYG{n}{unique\PYGZus{}countries\PYGZus{}per\PYGZus{}organisation}\PYG{p}{,}
                        \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{unique\PYGZhy{}recipient\PYGZhy{}country\PYGZhy{}code\PYGZhy{}count}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
                        \PYG{n}{title} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Histogram of Unique Recipient Countries by Implementing Organisation}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
                        \PYG{n}{bins}\PYG{o}{=}\PYG{l+m+mi}{150}\PYG{p}{)}
          
          \PYG{n}{show}\PYG{p}{(}\PYG{n}{p2}\PYG{p}{)}
\end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [331]: }\PYG{n}{num\PYGZus{}orgs\PYGZus{}with\PYGZus{}one\PYGZus{}recipient\PYGZus{}country} \PYG{o}{=} \PYG{n+nb}{len}\PYG{p}{(}
              \PYG{n}{unique\PYGZus{}countries\PYGZus{}per\PYGZus{}organisation}\PYG{p}{[}\PYG{n}{pd}\PYG{o}{.}\PYG{n}{to\PYGZus{}numeric}\PYG{p}{(}
                  \PYG{n}{unique\PYGZus{}countries\PYGZus{}per\PYGZus{}organisation}\PYG{p}{[}
                      \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{unique\PYGZhy{}recipient\PYGZhy{}country\PYGZhy{}code\PYGZhy{}count}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]} \PYG{o}{==} \PYG{l+m+mi}{1}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
          
          \PYG{n}{num\PYGZus{}orgs\PYGZus{}with\PYGZus{}more\PYGZus{}than\PYGZus{}one\PYGZus{}recipient\PYGZus{}country} \PYG{o}{=} \PYG{n+nb}{len}\PYG{p}{(}
              \PYG{n}{unique\PYGZus{}countries\PYGZus{}per\PYGZus{}organisation}\PYG{p}{[}\PYG{n}{pd}\PYG{o}{.}\PYG{n}{to\PYGZus{}numeric}\PYG{p}{(}
                  \PYG{n}{unique\PYGZus{}countries\PYGZus{}per\PYGZus{}organisation}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{unique\PYGZhy{}recipient\PYGZhy{}country\PYGZhy{}code\PYGZhy{}count}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}
                  \PYG{o}{\PYGZgt{}} \PYG{l+m+mi}{1}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
          
          \PYG{n+nb}{print}\PYG{p}{(}
              \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Generated Text: }\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{Of the }\PYG{l+s+si}{\PYGZob{}\PYGZcb{}}\PYG{l+s+s2}{ implementing organisations, }\PYG{l+s+si}{\PYGZob{}\PYGZcb{}}\PYG{l+s+s2}{ are associated with }\PYG{l+s+s2}{\PYGZdq{}}
              \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{one recipient country only, and }\PYG{l+s+si}{\PYGZob{}\PYGZcb{}}\PYG{l+s+s2}{ (}\PYG{l+s+si}{\PYGZob{}:.2\PYGZpc{}\PYGZcb{}}\PYG{l+s+s2}{) are asocciated with more than one.}\PYG{l+s+s2}{\PYGZdq{}}
              \PYG{o}{.}\PYG{n}{format}\PYG{p}{(}
                  \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{unique\PYGZus{}countries\PYGZus{}per\PYGZus{}organisation}\PYG{p}{)}\PYG{p}{,}
                  \PYG{n}{num\PYGZus{}orgs\PYGZus{}with\PYGZus{}one\PYGZus{}recipient\PYGZus{}country}\PYG{p}{,}
                  \PYG{n}{num\PYGZus{}orgs\PYGZus{}with\PYGZus{}more\PYGZus{}than\PYGZus{}one\PYGZus{}recipient\PYGZus{}country}\PYG{p}{,}
                  \PYG{n}{num\PYGZus{}orgs\PYGZus{}with\PYGZus{}more\PYGZus{}than\PYGZus{}one\PYGZus{}recipient\PYGZus{}country} \PYG{o}{/}
                  \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{unique\PYGZus{}countries\PYGZus{}per\PYGZus{}organisation}\PYG{p}{)}\PYG{p}{)}\PYG{p}{)}
\end{Verbatim}
%
\begin{OriginalVerbatim}[commandchars=\\\{\}]
Generated Text:

Of the 392 implementing organisations, 109 are associated with one recipient country only, and 283 (72.19\%) are asocciated with more than one.
\end{OriginalVerbatim}
% The following \relax is needed to avoid problems with adjacent ANSI
% cells and some other stuff (e.g. bullet lists) following ANSI cells.
% See https://github.com/sphinx-doc/sphinx/issues/3594
\relax
Exactly how this effects a data user's ability to make the inference in
question is not clear.

For one of the 109 organisations with only one recipient country
associated, the hope is that they are a local organisation themselves.
This can't be guaranteed without a more extensive study, but regardless,
it the search for local implementers would be easier for organisations
which are only associated with one recipient country.

For one of the 283 organisations with more than one associated recipient
country, there are two possibilities:
\begin{itemize}
\item {} 
It is a federated organisation which has easily identifiable country
offices and channels of contact.

\end{itemize}

In this case, for the \textasciitilde{}75\% of recipient country uses which can be
associated with the reference of an implementing organisation, in theory
a user could identify the local actors by contacting the country office
for that organisation, though it would depend on that user's initiative
to find out if any more organisation details.
\begin{itemize}
\item {} 
It is an intermediate-tier organisation which disburses funds to
local organisations as subcontractors.

\end{itemize}

In this case, for the same set as above, a user would have to find out
through other means. It would be possible, but would likely require
information from the implementing organisation directly and would be
laborious.


\section{Deliverable 3.1.3}
\label{\detokenize{Global Affairs Canada - Compliance Report:Deliverable-3.1.3}}

\subsection{Use Case}
\label{\detokenize{Global Affairs Canada - Compliance Report:Use-Case}}
\sphinxstyleemphasis{Determine at least the first step in the delivery chain, both through
the Organization Identifier and the partner’s Activity Identifier}

This section analyses the existence and coverage of the relevant fields:
participating organisations and transaction / receiver organisations, as
well as provider/receiver activity ids. Additional focus will look at
other-identifier (type A9)


\subsection{Other Identifier}
\label{\detokenize{Global Affairs Canada - Compliance Report:Other-Identifier}}
In light of its separation from the transaction element, it's worth
briefly looking at the other identifier first given that it doesn't
require much analysis in light of this use case:

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [332]: }\PYG{n}{activities\PYGZus{}with\PYGZus{}other\PYGZus{}identifier} \PYG{o}{=} \PYG{n}{big\PYGZus{}iati}\PYG{o}{.}\PYG{n}{xpath}\PYG{p}{(}
              \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{./iati\PYGZhy{}activity[other\PYGZhy{}identifier]}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
          \PYG{n}{other\PYGZus{}identifiers} \PYG{o}{=} \PYG{n}{big\PYGZus{}iati}\PYG{o}{.}\PYG{n}{xpath}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{./iati\PYGZhy{}activity/other\PYGZhy{}identifier/@type}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
          
          \PYG{n+nb}{print}\PYG{p}{(}
              \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Generated Text: }\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{There are }\PYG{l+s+si}{\PYGZob{}\PYGZcb{}}\PYG{l+s+s2}{ activities which include an other\PYGZhy{}identifier field, }\PYG{l+s+s2}{\PYGZdq{}}
              \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{which have }\PYG{l+s+si}{\PYGZob{}\PYGZcb{}}\PYG{l+s+s2}{ unique value among them: }\PYG{l+s+si}{\PYGZob{}\PYGZcb{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{.}\PYG{n}{format}\PYG{p}{(}
                  \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{activities\PYGZus{}with\PYGZus{}other\PYGZus{}identifier}\PYG{p}{)}\PYG{p}{,} \PYG{n+nb}{len}\PYG{p}{(}\PYG{n+nb}{set}\PYG{p}{(}\PYG{n}{other\PYGZus{}identifiers}\PYG{p}{)}\PYG{p}{)}\PYG{p}{,}
                  \PYG{n+nb}{set}\PYG{p}{(}\PYG{n}{other\PYGZus{}identifiers}\PYG{p}{)}\PYG{p}{)}\PYG{p}{)}
\end{Verbatim}
%
\begin{OriginalVerbatim}[commandchars=\\\{\}]
Generated Text:

There are 3280 activities which include an other-identifier field, which have 1 unique value among them: \{'A2'\}
\end{OriginalVerbatim}
% The following \relax is needed to avoid problems with adjacent ANSI
% cells and some other stuff (e.g. bullet lists) following ANSI cells.
% See https://github.com/sphinx-doc/sphinx/issues/3594
\relax
In virtue of the fact that this code designates a \sphinxhref{http://iatistandard.org/202/codelists/OtherIdentifierType/}{CRS
identifier},
it follows that none of these uses of the \sphinxcode{other-identifier} element
can help with this inference.


\subsection{Transactions}
\label{\detokenize{Global Affairs Canada - Compliance Report:Transactions}}

\subsubsection{Transaction Provider Organisation}
\label{\detokenize{Global Affairs Canada - Compliance Report:Transaction-Provider-Organisation}}
\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [333]: }\PYG{n}{activities\PYGZus{}with\PYGZus{}provider\PYGZus{}org\PYGZus{}transactions} \PYG{o}{=} \PYG{n}{big\PYGZus{}iati}\PYG{o}{.}\PYG{n}{xpath}\PYG{p}{(}
              \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{./iati\PYGZhy{}activity[transaction[provider\PYGZhy{}org]]}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
          
          \PYG{n+nb}{print}\PYG{p}{(}
              \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{There are }\PYG{l+s+si}{\PYGZob{}\PYGZcb{}}\PYG{l+s+s2}{ activities which contain a transaction that includes a provider\PYGZhy{}org element.}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{.}
              \PYG{n+nb}{format}\PYG{p}{(}\PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{activities\PYGZus{}with\PYGZus{}provider\PYGZus{}org\PYGZus{}transactions}\PYG{p}{)}\PYG{p}{)}\PYG{p}{)}
\end{Verbatim}
%
\begin{OriginalVerbatim}[commandchars=\\\{\}]
There are 0 activities which contain a transaction that includes a provider-org element.
\end{OriginalVerbatim}
% The following \relax is needed to avoid problems with adjacent ANSI
% cells and some other stuff (e.g. bullet lists) following ANSI cells.
% See https://github.com/sphinx-doc/sphinx/issues/3594
\relax
In virtue of the above, there cannot be any uses of the
\sphinxcode{provider-org/@ref} or the \sphinxcode{provider-org/@provider-activity-id}
attributes in evaluating the first step of the delivery chain.


\subsubsection{Transaction Receiver Organisation}
\label{\detokenize{Global Affairs Canada - Compliance Report:Transaction-Receiver-Organisation}}
Before conducting any analysis, a dataframe of transactions is retrieved
from the IATI files. The first five rows of which shown below:

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [334]: }\PYG{n}{transaction\PYGZus{}df} \PYG{o}{=} \PYG{n}{pd}\PYG{o}{.}\PYG{n}{DataFrame}\PYG{p}{(}
              \PYG{n}{columns}\PYG{o}{=}\PYG{p}{[}
                  \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{iati\PYGZhy{}identifier}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{value}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{activity\PYGZhy{}status}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{ref}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{humanitarian}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
                  \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{transaction\PYGZhy{}type}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{transaction\PYGZhy{}date}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{receiver\PYGZhy{}org\PYGZhy{}ref}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
                  \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{receiver\PYGZhy{}org\PYGZhy{}activity\PYGZhy{}id}\PYG{l+s+s1}{\PYGZsq{}}
              \PYG{p}{]}\PYG{p}{,}
              \PYG{n}{data}\PYG{o}{=}\PYG{p}{[}\PYG{p}{[}
                  \PYG{n}{transaction}\PYG{o}{.}\PYG{n}{getparent}\PYG{p}{(}\PYG{p}{)}\PYG{o}{.}\PYG{n}{find}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{iati\PYGZhy{}identifier}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{o}{.}\PYG{n}{text}\PYG{p}{,}
                  \PYG{n+nb}{float}\PYG{p}{(}\PYG{n}{transaction}\PYG{o}{.}\PYG{n}{find}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{value}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{o}{.}\PYG{n}{text}\PYG{p}{)}\PYG{p}{,}
                  \PYG{n}{transaction}\PYG{o}{.}\PYG{n}{getparent}\PYG{p}{(}\PYG{p}{)}\PYG{o}{.}\PYG{n}{find}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{activity\PYGZhy{}status}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{o}{.}\PYG{n}{get}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{code}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{,}
                  \PYG{n}{transaction}\PYG{o}{.}\PYG{n}{get}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{ref}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{,}
                  \PYG{n}{transaction}\PYG{o}{.}\PYG{n}{get}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{humanitarian}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{,}
                  \PYG{n}{transaction}\PYG{o}{.}\PYG{n}{find}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{transaction\PYGZhy{}type}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{o}{.}\PYG{n}{get}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{code}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{,}
                  \PYG{n}{transaction}\PYG{o}{.}\PYG{n}{find}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{transaction\PYGZhy{}date}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{o}{.}\PYG{n}{get}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{iso\PYGZhy{}date}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{,}
                  \PYG{n}{transaction}\PYG{o}{.}\PYG{n}{find}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{receiver\PYGZhy{}org}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{o}{.}\PYG{n}{get}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{ref}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
                  \PYG{k}{if} \PYG{n}{transaction}\PYG{o}{.}\PYG{n}{find}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{receiver\PYGZhy{}org}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)} \PYG{o+ow}{is} \PYG{o+ow}{not} \PYG{k+kc}{None} \PYG{k}{else} \PYG{k+kc}{None}\PYG{p}{,}
                  \PYG{n}{transaction}\PYG{o}{.}\PYG{n}{find}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{receiver\PYGZhy{}org}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{o}{.}\PYG{n}{get}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{receiver\PYGZhy{}activity\PYGZhy{}id}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
                  \PYG{k}{if} \PYG{n}{transaction}\PYG{o}{.}\PYG{n}{find}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{receiver\PYGZhy{}org}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)} \PYG{o+ow}{is} \PYG{o+ow}{not} \PYG{k+kc}{None} \PYG{k}{else} \PYG{k+kc}{None}
              \PYG{p}{]} \PYG{k}{for} \PYG{n}{transaction} \PYG{o+ow}{in} \PYG{n}{big\PYGZus{}iati}\PYG{o}{.}\PYG{n}{xpath}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{iati\PYGZhy{}activity/transaction}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
          
          \PYG{n}{transaction\PYGZus{}df}\PYG{o}{.}\PYG{n}{to\PYGZus{}excel}\PYG{p}{(}\PYG{n}{pd\PYGZus{}writer}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Transactions}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
          
          \PYG{n}{transaction\PYGZus{}df}\PYG{o}{.}\PYG{n}{head}\PYG{p}{(}\PYG{p}{)}
\end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxout}{Out[334]: }iati\PYGZhy{}identifier        value activity\PYGZhy{}status   ref humanitarian  \PYGZbs{}
          0  CA\PYGZhy{}3\PYGZhy{}A031268001  17933718.13               3  None         None
          1  CA\PYGZhy{}3\PYGZhy{}A031268001    500000.00               3  None         None
          2  CA\PYGZhy{}3\PYGZhy{}A031268001    101000.00               3  None         None
          3  CA\PYGZhy{}3\PYGZhy{}A031268001     41000.00               3  None         None
          4  CA\PYGZhy{}3\PYGZhy{}A031268001    250000.00               3  None         None
          
            transaction\PYGZhy{}type transaction\PYGZhy{}date receiver\PYGZhy{}org\PYGZhy{}ref receiver\PYGZhy{}org\PYGZhy{}activity\PYGZhy{}id
          0                2       2003\PYGZhy{}04\PYGZhy{}07             None                     None
          1                3       2003\PYGZhy{}09\PYGZhy{}18             None                     None
          2                3       2003\PYGZhy{}12\PYGZhy{}05             None                     None
          3                3       2004\PYGZhy{}02\PYGZhy{}19             None                     None
          4                3       2004\PYGZhy{}04\PYGZhy{}05             None                     None
\end{Verbatim}

Firstly, as we have the information to hand, we can see that no
transactions have \sphinxcode{@ref} identifier or \sphinxcode{@humanitarian} flag:

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [335]: }\PYG{n}{transaction\PYGZus{}df}\PYG{p}{[}\PYG{p}{[}
              \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{value}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{activity\PYGZhy{}status}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{ref}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{humanitarian}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{transaction\PYGZhy{}type}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
              \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{transaction\PYGZhy{}date}\PYG{l+s+s1}{\PYGZsq{}}
          \PYG{p}{]}\PYG{p}{]}\PYG{o}{.}\PYG{n}{describe}\PYG{p}{(}\PYG{n}{exclude}\PYG{o}{=}\PYG{p}{[}\PYG{n+nb}{float}\PYG{p}{]}\PYG{p}{)}
\end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxout}{Out[335]: }activity\PYGZhy{}status  ref  humanitarian transaction\PYGZhy{}type transaction\PYGZhy{}date
          count            23637  0.0           0.0            23637            23637
          unique               3  0.0           0.0                2             3408
          top                  4  NaN           NaN                3       2015\PYGZhy{}03\PYGZhy{}31
          freq             15168  NaN           NaN            19656              282
\end{Verbatim}

Secondly, we can select only the disbursements, as befits an analysis of
receiver organisation data:

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [336]: }\PYG{n}{transaction\PYGZus{}df}\PYG{p}{[}\PYG{n}{transaction\PYGZus{}df}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{transaction\PYGZhy{}type}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]} \PYG{o}{==} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{3}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{[}\PYG{p}{[}
              \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{activity\PYGZhy{}status}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{transaction\PYGZhy{}type}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{receiver\PYGZhy{}org\PYGZhy{}ref}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
              \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{receiver\PYGZhy{}org\PYGZhy{}activity\PYGZhy{}id}\PYG{l+s+s1}{\PYGZsq{}}
          \PYG{p}{]}\PYG{p}{]}\PYG{o}{.}\PYG{n}{describe}\PYG{p}{(}\PYG{p}{)}
\end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxout}{Out[336]: }activity\PYGZhy{}status transaction\PYGZhy{}type receiver\PYGZhy{}org\PYGZhy{}ref  \PYGZbs{}
          count            19656            19656            14125
          unique               3                1              398
          top                  4                3            41140
          freq             12414            19656              511
          
                  receiver\PYGZhy{}org\PYGZhy{}activity\PYGZhy{}id
          count                        0.0
          unique                       0.0
          top                          NaN
          freq                         NaN
\end{Verbatim}

As we can see from this, there no usage of the
\sphinxcode{@receiver-org-activity-id}, but 14,125 (71.86\%) transactions of the
total 19,656 disbursements do include a \sphinxcode{@receiver-org-ref}.


\section{Deliverable 3.1.4}
\label{\detokenize{Global Affairs Canada - Compliance Report:Deliverable-3.1.4}}

\subsection{Use Case}
\label{\detokenize{Global Affairs Canada - Compliance Report:Use-Case}}
\sphinxstyleemphasis{Identify joint funding and determine the lead donor/implementing
agency}

This section considers the existence and coverage of the relevant
fields: participating organisations, transaction / receiver
organisations, and related activity.

Looking at the {\hyperref[\detokenize{Global Affairs Canada - Compliance Report:Participating-Organisations}]{\emph{above section on participating
organisations}}} we can see that there is
full coverage of participating organisations with regard to funding and
and extending, but that 24.64\% of declarations don't include a \sphinxcode{@ref}
attribute, and 7.30\% don't include a \sphinxcode{@type} declaration. Both of
these could make it more difficult to establish the exact organisation
and whether or not it has joint funded an activity.

Similarly, looking at the section above {\hyperref[\detokenize{Global Affairs Canada - Compliance Report:Transaction-Receiver-Organisation}]{\emph{on transaction
receiver-orgs}}}, we see that
although there is no prospect of tracing locating a participating
organisation's activity, references are available for the recipients of
71.86\% of transactions. Although it would be laborious to do, it is
possible that in all of these cases, the implementing organisation could
be identified.

However, because there are no details on the {\hyperref[\detokenize{Global Affairs Canada - Compliance Report:Transaction-Provider-Organisation}]{\emph{providing
organisations}}}, transactions are
assumed not to include any details of lead donors which aren't already
available in the activity-level participating organisation details.

Let's now consider the related activity fields. First, let's find how
many activities have included a related activity element:

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [337]: }\PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{big\PYGZus{}iati}\PYG{o}{.}\PYG{n}{xpath}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{./iati\PYGZhy{}activity[related\PYGZhy{}activity]}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{)}
\end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxout}{Out[337]: }607
\end{Verbatim}

Now let's what types have been included:

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [338]: }\PYG{n+nb}{set}\PYG{p}{(}\PYG{n}{big\PYGZus{}iati}\PYG{o}{.}\PYG{n}{xpath}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{./iati\PYGZhy{}activity/related\PYGZhy{}activity/@type}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{)}
\end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxout}{Out[338]: }\PYGZob{}\PYGZsq{}3\PYGZsq{}\PYGZcb{}
\end{Verbatim}

As there are only references to \sphinxhref{http://iatistandard.org/202/codelists/RelatedActivityType/}{sibling
activities},
but none to co-funded or third party activities, it follows that of
these 607 activities none can be used to identify joint-funded
activities.


\section{Deliverable 3.1.5}
\label{\detokenize{Global Affairs Canada - Compliance Report:Deliverable-3.1.5}}

\subsection{Use Case}
\label{\detokenize{Global Affairs Canada - Compliance Report:Use-Case}}
\sphinxstyleemphasis{Determine the geographic area(s) benefiting from the project and, where
relevant, the actual location of the project activities}

This section considers the existence and coverage of the relevant fields
- recipient country \& region at the activity and transaction level, as
well as locations (national and subnational).


\subsection{Activity Level Recipient Locations}
\label{\detokenize{Global Affairs Canada - Compliance Report:Activity-Level-Recipient-Locations}}
With regards to recipient country and region at the activity level, by
referring to {\hyperref[\detokenize{Global Affairs Canada - Compliance Report:Deliverable-3.1.1}]{\emph{Deliverable 3.1.1 above}}} it can be
seen that there is nearly 100\% coverage of recipient locations as either
countries or regions, though the usability of those elements is hindered
by the existence of many activities with more than one recipient
country. To recap the number of activities with recipient countries and
regions:

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [339]: }\PYG{n+nb}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Of }\PYG{l+s+si}{\PYGZob{}\PYGZcb{}}\PYG{l+s+s2}{ activities, }\PYG{l+s+si}{\PYGZob{}\PYGZcb{}}\PYG{l+s+s2}{ (}\PYG{l+s+si}{\PYGZob{}:.2\PYGZpc{}\PYGZcb{}}\PYG{l+s+s2}{) include at least one recipient country}\PYG{l+s+s2}{\PYGZdq{}}
                \PYG{o}{.}\PYG{n}{format}\PYG{p}{(}
                    \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{big\PYGZus{}iati}\PYG{p}{)}\PYG{p}{,}
                    \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{big\PYGZus{}iati}\PYG{o}{.}\PYG{n}{xpath}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{iati\PYGZhy{}activity[recipient\PYGZhy{}country]}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{)}\PYG{p}{,}
                    \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{big\PYGZus{}iati}\PYG{o}{.}\PYG{n}{xpath}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{iati\PYGZhy{}activity[recipient\PYGZhy{}country]}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{)} \PYG{o}{/} \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{big\PYGZus{}iati}\PYG{p}{)}\PYG{p}{)}\PYG{p}{)}
\end{Verbatim}
%
\begin{OriginalVerbatim}[commandchars=\\\{\}]
Of 3961 activities, 3389 (85.56\%) include at least one recipient country
\end{OriginalVerbatim}
% The following \relax is needed to avoid problems with adjacent ANSI
% cells and some other stuff (e.g. bullet lists) following ANSI cells.
% See https://github.com/sphinx-doc/sphinx/issues/3594
\relax
\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [340]: }\PYG{n+nb}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Of }\PYG{l+s+si}{\PYGZob{}\PYGZcb{}}\PYG{l+s+s2}{ activities, }\PYG{l+s+si}{\PYGZob{}\PYGZcb{}}\PYG{l+s+s2}{ (}\PYG{l+s+si}{\PYGZob{}:.2\PYGZpc{}\PYGZcb{}}\PYG{l+s+s2}{) include at least one recipient region}\PYG{l+s+s2}{\PYGZdq{}}
                \PYG{o}{.}\PYG{n}{format}\PYG{p}{(}
                    \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{big\PYGZus{}iati}\PYG{p}{)}\PYG{p}{,}
                    \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{big\PYGZus{}iati}\PYG{o}{.}\PYG{n}{xpath}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{iati\PYGZhy{}activity[recipient\PYGZhy{}region]}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{)}\PYG{p}{,}
                    \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{big\PYGZus{}iati}\PYG{o}{.}\PYG{n}{xpath}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{iati\PYGZhy{}activity[recipient\PYGZhy{}region]}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{)} \PYG{o}{/} \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{big\PYGZus{}iati}\PYG{p}{)}\PYG{p}{)}\PYG{p}{)}
\end{Verbatim}
%
\begin{OriginalVerbatim}[commandchars=\\\{\}]
Of 3961 activities, 616 (15.55\%) include at least one recipient region
\end{OriginalVerbatim}
% The following \relax is needed to avoid problems with adjacent ANSI
% cells and some other stuff (e.g. bullet lists) following ANSI cells.
% See https://github.com/sphinx-doc/sphinx/issues/3594
\relax
\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [341]: }\PYG{n}{var} \PYG{o}{=} \PYG{n+nb}{len}\PYG{p}{(}
              \PYG{n+nb}{set}\PYG{p}{(}
                  \PYG{n}{big\PYGZus{}iati}\PYG{o}{.}\PYG{n}{xpath}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{iati\PYGZhy{}activity[recipient\PYGZhy{}region]}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)} \PYG{o}{+}
                  \PYG{n}{big\PYGZus{}iati}\PYG{o}{.}\PYG{n}{xpath}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{iati\PYGZhy{}activity[recipient\PYGZhy{}country]}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{)}\PYG{p}{)}
          
          \PYG{n+nb}{print}\PYG{p}{(}
              \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Together, excluding any duplicates, these }\PYG{l+s+si}{\PYGZob{}\PYGZcb{}}\PYG{l+s+s2}{ activites comprise }\PYG{l+s+si}{\PYGZob{}:.2\PYGZpc{}\PYGZcb{}}\PYG{l+s+s2}{ of the total.}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{.}
              \PYG{n+nb}{format}\PYG{p}{(}\PYG{n}{var}\PYG{p}{,} \PYG{n}{var} \PYG{o}{/} \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{big\PYGZus{}iati}\PYG{p}{)}\PYG{p}{)}\PYG{p}{)}
\end{Verbatim}
%
\begin{OriginalVerbatim}[commandchars=\\\{\}]
Together, excluding any duplicates, these 3959 activites comprise 99.95\% of the total.
\end{OriginalVerbatim}
% The following \relax is needed to avoid problems with adjacent ANSI
% cells and some other stuff (e.g. bullet lists) following ANSI cells.
% See https://github.com/sphinx-doc/sphinx/issues/3594
\relax

\subsection{Transaction Level Recipient Locations}
\label{\detokenize{Global Affairs Canada - Compliance Report:Transaction-Level-Recipient-Locations}}
\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [342]: }\PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{big\PYGZus{}iati}\PYG{o}{.}\PYG{n}{xpath}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{iati\PYGZhy{}activity[transaction[recipient\PYGZhy{}country]]}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{)}
\end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxout}{Out[342]: }0
\end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [343]: }\PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{big\PYGZus{}iati}\PYG{o}{.}\PYG{n}{xpath}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{iati\PYGZhy{}activity[transaction[recipient\PYGZhy{}country]]}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{)}
\end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxout}{Out[343]: }0
\end{Verbatim}

In the current data, there are no location details at transaction level.


\subsection{Locations Elements}
\label{\detokenize{Global Affairs Canada - Compliance Report:Locations-Elements}}
\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [344]: }\PYG{n+nb}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+si}{\PYGZob{}\PYGZcb{}}\PYG{l+s+s2}{ of the }\PYG{l+s+si}{\PYGZob{}\PYGZcb{}}\PYG{l+s+s2}{ (}\PYG{l+s+si}{\PYGZob{}:.2\PYGZpc{}\PYGZcb{}}\PYG{l+s+s2}{) published activities contain location elements.}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{.}
                \PYG{n+nb}{format}\PYG{p}{(}
                    \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{big\PYGZus{}iati}\PYG{o}{.}\PYG{n}{xpath}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{iati\PYGZhy{}activity[location]}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{)}\PYG{p}{,}
                    \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{big\PYGZus{}iati}\PYG{p}{)}\PYG{p}{,}
                    \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{big\PYGZus{}iati}\PYG{o}{.}\PYG{n}{xpath}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{iati\PYGZhy{}activity[location]}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{)} \PYG{o}{/} \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{big\PYGZus{}iati}\PYG{p}{)}
                \PYG{p}{)}\PYG{p}{)}
\end{Verbatim}
%
\begin{OriginalVerbatim}[commandchars=\\\{\}]
3730 of the 3961 (94.17\%) published activities contain location elements.
\end{OriginalVerbatim}
% The following \relax is needed to avoid problems with adjacent ANSI
% cells and some other stuff (e.g. bullet lists) following ANSI cells.
% See https://github.com/sphinx-doc/sphinx/issues/3594
\relax
These can be viewed in more details, as the recipient countries were
above. Again, here is every unique declaration of a location at the
activity level, clipped at 5 rows.

\begin{notice}{note}{}\unskip
\sphinxstylestrong{Note}: there are multiple rows per activity, as above.
\end{notice}

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [345]: }\PYG{n}{detailed\PYGZus{}locations} \PYG{o}{=} \PYG{n}{pd}\PYG{o}{.}\PYG{n}{DataFrame}\PYG{p}{(}
              \PYG{n}{columns}\PYG{o}{=}\PYG{p}{[}
                  \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{iati\PYGZhy{}identifier}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
                  \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{activity\PYGZhy{}status}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
                  \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{location\PYGZhy{}reach\PYGZhy{}code}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
                  \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{location\PYGZhy{}id\PYGZhy{}code}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
                  \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{location\PYGZhy{}id\PYGZhy{}vocabulary}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
                  \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{location\PYGZhy{}point\PYGZhy{}srs}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
                  \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{location\PYGZhy{}point\PYGZhy{}pos}\PYG{l+s+s1}{\PYGZsq{}}
              \PYG{p}{]}\PYG{p}{,}
              \PYG{n}{data}\PYG{o}{=}\PYG{p}{[}\PYG{p}{[}
                  \PYG{n}{location}\PYG{o}{.}\PYG{n}{getparent}\PYG{p}{(}\PYG{p}{)}\PYG{o}{.}\PYG{n}{find}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{iati\PYGZhy{}identifier}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{o}{.}\PYG{n}{text}\PYG{p}{,}
                  \PYG{n}{location}\PYG{o}{.}\PYG{n}{getparent}\PYG{p}{(}\PYG{p}{)}\PYG{o}{.}\PYG{n}{find}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{activity\PYGZhy{}status}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{o}{.}\PYG{n}{get}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{code}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{,}
                  \PYG{n}{location}\PYG{o}{.}\PYG{n}{find}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{location\PYGZhy{}reach}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{o}{.}\PYG{n}{get}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{code}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{,}
                  \PYG{n}{location}\PYG{o}{.}\PYG{n}{find}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{location\PYGZhy{}id}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{o}{.}\PYG{n}{get}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{code}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{,}
                  \PYG{n}{location}\PYG{o}{.}\PYG{n}{find}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{location\PYGZhy{}id}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{o}{.}\PYG{n}{get}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{vocabulary}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{,}
                  \PYG{n}{location}\PYG{o}{.}\PYG{n}{find}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{point}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{o}{.}\PYG{n}{get}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{srsName}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{,}
                  \PYG{n}{location}\PYG{o}{.}\PYG{n}{find}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{point/pos}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{o}{.}\PYG{n}{text}
              \PYG{p}{]} \PYG{k}{for} \PYG{n}{location} \PYG{o+ow}{in} \PYG{n}{big\PYGZus{}iati}\PYG{o}{.}\PYG{n}{findall}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{iati\PYGZhy{}activity/location}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
          
          \PYG{n}{detailed\PYGZus{}locations}\PYG{o}{.}\PYG{n}{to\PYGZus{}excel}\PYG{p}{(}\PYG{n}{pd\PYGZus{}writer}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Location Elements}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
          
          \PYG{n}{detailed\PYGZus{}locations}\PYG{o}{.}\PYG{n}{head}\PYG{p}{(}\PYG{p}{)}
\end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxout}{Out[345]: }iati\PYGZhy{}identifier activity\PYGZhy{}status location\PYGZhy{}reach\PYGZhy{}code location\PYGZhy{}id\PYGZhy{}code  \PYGZbs{}
          0  CA\PYGZhy{}3\PYGZhy{}A031268001               3                   1          3378644
          1  CA\PYGZhy{}3\PYGZhy{}A031268001               3                   1          3383330
          2  CA\PYGZhy{}3\PYGZhy{}A031268001               3                   1          3435910
          3  CA\PYGZhy{}3\PYGZhy{}A031268001               3                   1          3439389
          4  CA\PYGZhy{}3\PYGZhy{}A031268001               3                   1          3441575
          
            location\PYGZhy{}id\PYGZhy{}vocabulary                          location\PYGZhy{}point\PYGZhy{}srs  \PYGZbs{}
          0                     G1  http://www.opengis.net/def/crs/EPSG/0/4326
          1                     G1  http://www.opengis.net/def/crs/EPSG/0/4326
          2                     G1  http://www.opengis.net/def/crs/EPSG/0/4326
          3                     G1  http://www.opengis.net/def/crs/EPSG/0/4326
          4                     G1  http://www.opengis.net/def/crs/EPSG/0/4326
          
              location\PYGZhy{}point\PYGZhy{}pos
          0    6.80448 \PYGZhy{}58.15527
          1    5.86638 \PYGZhy{}55.16682
          2  \PYGZhy{}34.61315 \PYGZhy{}58.37723
          3  \PYGZhy{}25.30066 \PYGZhy{}57.63591
          4  \PYGZhy{}34.90328 \PYGZhy{}56.18816
\end{Verbatim}

Again, this isn't very useful by itself, so let's group by the activity
and analyse the counts of each location field:

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [346]: }\PYG{n}{location\PYGZus{}elements\PYGZus{}pivot} \PYG{o}{=} \PYG{n}{detailed\PYGZus{}locations}\PYG{o}{.}\PYG{n}{groupby}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{iati\PYGZhy{}identifier}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{o}{.}\PYG{n}{agg}\PYG{p}{(}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{count}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{)}
          
          \PYG{n}{location\PYGZus{}elements\PYGZus{}pivot}\PYG{o}{.}\PYG{n}{describe}\PYG{p}{(}\PYG{p}{)}
\end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxout}{Out[346]: }activity\PYGZhy{}status location\PYGZhy{}reach\PYGZhy{}code location\PYGZhy{}id\PYGZhy{}code  \PYGZbs{}
                          count               count            count
          count     3730.000000         3730.000000      3730.000000
          mean         3.150670            3.150670         3.150670
          std          7.870249            7.870249         7.870249
          min          1.000000            1.000000         1.000000
          25\PYGZpc{}          1.000000            1.000000         1.000000
          50\PYGZpc{}          1.000000            1.000000         1.000000
          75\PYGZpc{}          2.000000            2.000000         2.000000
          max        191.000000          191.000000       191.000000
          
                location\PYGZhy{}id\PYGZhy{}vocabulary location\PYGZhy{}point\PYGZhy{}srs location\PYGZhy{}point\PYGZhy{}pos
                                 count              count              count
          count            3730.000000        3730.000000        3730.000000
          mean                3.150670           3.150670           3.150670
          std                 7.870249           7.870249           7.870249
          min                 1.000000           1.000000           1.000000
          25\PYGZpc{}                 1.000000           1.000000           1.000000
          50\PYGZpc{}                 1.000000           1.000000           1.000000
          75\PYGZpc{}                 2.000000           2.000000           2.000000
          max               191.000000         191.000000         191.000000
\end{Verbatim}

Here all of the fields are used uniformly, and the distribution looks
similar to recipient countries above, which represents the same
challenge for usability when there are many locations to a given
activity. Especially given that there is no way of associating those
locations with the recipient-country elements, or the activities
transactions.


\section{Deliverable 3.1.6}
\label{\detokenize{Global Affairs Canada - Compliance Report:Deliverable-3.1.6}}

\subsection{Use Case}
\label{\detokenize{Global Affairs Canada - Compliance Report:Use-Case}}
\sphinxstyleemphasis{Verify that the financial data of a project “adds up” (e.g. comparing
commitments to budgets and disbursements)}

This section considers the existence and coverage of the relevant fields
- budgets, commitments and transactions (broken down by type).


\subsection{Budgets}
\label{\detokenize{Global Affairs Canada - Compliance Report:Budgets}}
\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [347]: }\PYG{n+nb}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+si}{\PYGZob{}\PYGZcb{}}\PYG{l+s+s2}{ of the }\PYG{l+s+si}{\PYGZob{}\PYGZcb{}}\PYG{l+s+s2}{ (}\PYG{l+s+si}{\PYGZob{}:.2\PYGZpc{}\PYGZcb{}}\PYG{l+s+s2}{) published activities contain budgets.}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{.}
                \PYG{n+nb}{format}\PYG{p}{(}
                    \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{big\PYGZus{}iati}\PYG{o}{.}\PYG{n}{xpath}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{iati\PYGZhy{}activity[budget]}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{)}\PYG{p}{,}
                    \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{big\PYGZus{}iati}\PYG{p}{)}\PYG{p}{,}
                    \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{big\PYGZus{}iati}\PYG{o}{.}\PYG{n}{xpath}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{iati\PYGZhy{}activity[budget]}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{)} \PYG{o}{/} \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{big\PYGZus{}iati}\PYG{p}{)}
                \PYG{p}{)}\PYG{p}{)}
\end{Verbatim}
%
\begin{OriginalVerbatim}[commandchars=\\\{\}]
3952 of the 3961 (99.77\%) published activities contain budgets.
\end{OriginalVerbatim}
% The following \relax is needed to avoid problems with adjacent ANSI
% cells and some other stuff (e.g. bullet lists) following ANSI cells.
% See https://github.com/sphinx-doc/sphinx/issues/3594
\relax

\subsection{Transactions}
\label{\detokenize{Global Affairs Canada - Compliance Report:Transactions}}
\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [348]: }\PYG{n+nb}{print}\PYG{p}{(}
              \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{The following transaction types are incuded in the analysed activities: }\PYG{l+s+si}{\PYGZob{}\PYGZcb{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{.}
              \PYG{n+nb}{format}\PYG{p}{(}
                  \PYG{n+nb}{set}\PYG{p}{(}
                      \PYG{n}{big\PYGZus{}iati}\PYG{o}{.}\PYG{n}{xpath}\PYG{p}{(}
                          \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{iati\PYGZhy{}activity/transaction/transaction\PYGZhy{}type/@code}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{)}\PYG{p}{)}\PYG{p}{)}
\end{Verbatim}
%
\begin{OriginalVerbatim}[commandchars=\\\{\}]
The following transaction types are incuded in the analysed activities: \{'2', '3'\}
\end{OriginalVerbatim}
% The following \relax is needed to avoid problems with adjacent ANSI
% cells and some other stuff (e.g. bullet lists) following ANSI cells.
% See https://github.com/sphinx-doc/sphinx/issues/3594
\relax
These types correspond to commitment and disbursement respectively (see
\sphinxhref{http://iatistandard.org/202/codelists/TransactionType/}{here}).

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [349]: }\PYG{n+nb}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+si}{\PYGZob{}\PYGZcb{}}\PYG{l+s+s2}{ of the }\PYG{l+s+si}{\PYGZob{}\PYGZcb{}}\PYG{l+s+s2}{ (}\PYG{l+s+si}{\PYGZob{}:.2\PYGZpc{}\PYGZcb{}}\PYG{l+s+s2}{) published activities contain commitments.}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{.}
                \PYG{n+nb}{format}\PYG{p}{(}
                    \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{big\PYGZus{}iati}\PYG{o}{.}\PYG{n}{xpath}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{iati\PYGZhy{}activity[transaction[transaction\PYGZhy{}type[@code=}\PYG{l+s+s2}{\PYGZsq{}}\PYG{l+s+s2}{2}\PYG{l+s+s2}{\PYGZsq{}}\PYG{l+s+s2}{]]]}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{)}\PYG{p}{,}
                    \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{big\PYGZus{}iati}\PYG{p}{)}\PYG{p}{,}
                    \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{big\PYGZus{}iati}\PYG{o}{.}\PYG{n}{xpath}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{iati\PYGZhy{}activity[transaction[transaction\PYGZhy{}type[@code=}\PYG{l+s+s2}{\PYGZsq{}}\PYG{l+s+s2}{2}\PYG{l+s+s2}{\PYGZsq{}}\PYG{l+s+s2}{]]]}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{)} \PYG{o}{/} \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{big\PYGZus{}iati}\PYG{p}{)}
                \PYG{p}{)}\PYG{p}{)}
\end{Verbatim}
%
\begin{OriginalVerbatim}[commandchars=\\\{\}]
3952 of the 3961 (99.77\%) published activities contain commitments.
\end{OriginalVerbatim}
% The following \relax is needed to avoid problems with adjacent ANSI
% cells and some other stuff (e.g. bullet lists) following ANSI cells.
% See https://github.com/sphinx-doc/sphinx/issues/3594
\relax
\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [350]: }\PYG{n+nb}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+si}{\PYGZob{}\PYGZcb{}}\PYG{l+s+s2}{ of the }\PYG{l+s+si}{\PYGZob{}\PYGZcb{}}\PYG{l+s+s2}{ (}\PYG{l+s+si}{\PYGZob{}:.2\PYGZpc{}\PYGZcb{}}\PYG{l+s+s2}{) published activities contain commitments.}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{.}
                \PYG{n+nb}{format}\PYG{p}{(}
                    \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{big\PYGZus{}iati}\PYG{o}{.}\PYG{n}{xpath}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{iati\PYGZhy{}activity[transaction[transaction\PYGZhy{}type[@code=}\PYG{l+s+s2}{\PYGZsq{}}\PYG{l+s+s2}{3}\PYG{l+s+s2}{\PYGZsq{}}\PYG{l+s+s2}{]]]}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{)}\PYG{p}{,}
                    \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{big\PYGZus{}iati}\PYG{p}{)}\PYG{p}{,}
                    \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{big\PYGZus{}iati}\PYG{o}{.}\PYG{n}{xpath}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{iati\PYGZhy{}activity[transaction[transaction\PYGZhy{}type[@code=}\PYG{l+s+s2}{\PYGZsq{}}\PYG{l+s+s2}{3}\PYG{l+s+s2}{\PYGZsq{}}\PYG{l+s+s2}{]]]}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{)} \PYG{o}{/} \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{big\PYGZus{}iati}\PYG{p}{)}
                \PYG{p}{)}\PYG{p}{)}
\end{Verbatim}
%
\begin{OriginalVerbatim}[commandchars=\\\{\}]
3455 of the 3961 (87.23\%) published activities contain commitments.
\end{OriginalVerbatim}
% The following \relax is needed to avoid problems with adjacent ANSI
% cells and some other stuff (e.g. bullet lists) following ANSI cells.
% See https://github.com/sphinx-doc/sphinx/issues/3594
\relax
From the above, it's clear that there is good coverage on the considered
financial elements, with commitments being the lowest at just under 90\%
coverage.

Without going into much more detail, this gives a prima facie indication
of the number of activities for which `adding' up the financials is
possible, and it is possible that the drop in coverage for commitments
is due to the timing of activities. Without a deeper analysis, we can't
be certain of this at present.


\subsection{Planned Disbursements}
\label{\detokenize{Global Affairs Canada - Compliance Report:Planned-Disbursements}}
\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [351]: }\PYG{n+nb}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+si}{\PYGZob{}\PYGZcb{}}\PYG{l+s+s2}{ of the }\PYG{l+s+si}{\PYGZob{}\PYGZcb{}}\PYG{l+s+s2}{ (}\PYG{l+s+si}{\PYGZob{}:.2\PYGZpc{}\PYGZcb{}}\PYG{l+s+s2}{) published activities planned disbursements.}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{.}
                \PYG{n+nb}{format}\PYG{p}{(}
                    \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{big\PYGZus{}iati}\PYG{o}{.}\PYG{n}{xpath}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{iati\PYGZhy{}activity[planned\PYGZhy{}disbursement]}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{)}\PYG{p}{,}
                    \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{big\PYGZus{}iati}\PYG{p}{)}\PYG{p}{,}
                    \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{big\PYGZus{}iati}\PYG{o}{.}\PYG{n}{xpath}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{iati\PYGZhy{}activity[planned\PYGZhy{}disbursement]}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{)} \PYG{o}{/} \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{big\PYGZus{}iati}\PYG{p}{)}
                \PYG{p}{)}\PYG{p}{)}
\end{Verbatim}
%
\begin{OriginalVerbatim}[commandchars=\\\{\}]
1162 of the 3961 (29.34\%) published activities planned disbursements.
\end{OriginalVerbatim}
% The following \relax is needed to avoid problems with adjacent ANSI
% cells and some other stuff (e.g. bullet lists) following ANSI cells.
% See https://github.com/sphinx-doc/sphinx/issues/3594
\relax
Planned disbursements are an exception, it is possible that this is just
a representation of the lower proportion of forward-looking activities.


\subsection{In Combination}
\label{\detokenize{Global Affairs Canada - Compliance Report:In-Combination}}
\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [352]: }\PYG{n}{activities\PYGZus{}with\PYGZus{}budgets\PYGZus{}commitments\PYGZus{}disbursements} \PYG{o}{=} \PYG{n}{big\PYGZus{}iati}\PYG{o}{.}\PYG{n}{xpath}\PYG{p}{(}
              \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{iati\PYGZhy{}activity[transaction[transaction\PYGZhy{}type[@code=}\PYG{l+s+s2}{\PYGZsq{}}\PYG{l+s+s2}{2}\PYG{l+s+s2}{\PYGZsq{}}\PYG{l+s+s2}{]] and }\PYG{l+s+s2}{\PYGZdq{}}
              \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{transaction[transaction\PYGZhy{}type[@code=}\PYG{l+s+s2}{\PYGZsq{}}\PYG{l+s+s2}{3}\PYG{l+s+s2}{\PYGZsq{}}\PYG{l+s+s2}{]] and }\PYG{l+s+s2}{\PYGZdq{}}
              \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{budget]}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
          
          \PYG{n+nb}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+si}{\PYGZob{}\PYGZcb{}}\PYG{l+s+s2}{ of the }\PYG{l+s+si}{\PYGZob{}\PYGZcb{}}\PYG{l+s+s2}{ (}\PYG{l+s+si}{\PYGZob{}:.2\PYGZpc{}\PYGZcb{}}\PYG{l+s+s2}{) published activities budgets, commitments, and disbursements.}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{.}
                \PYG{n+nb}{format}\PYG{p}{(}
                    \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{activities\PYGZus{}with\PYGZus{}budgets\PYGZus{}commitments\PYGZus{}disbursements}\PYG{p}{)}\PYG{p}{,}
                    \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{big\PYGZus{}iati}\PYG{p}{)}\PYG{p}{,}
                    \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{activities\PYGZus{}with\PYGZus{}budgets\PYGZus{}commitments\PYGZus{}disbursements}\PYG{p}{)} \PYG{o}{/} \PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{big\PYGZus{}iati}\PYG{p}{)}
                \PYG{p}{)}\PYG{p}{)}
\end{Verbatim}
%
\begin{OriginalVerbatim}[commandchars=\\\{\}]
3455 of the 3961 (87.23\%) published activities budgets, commitments, and disbursements.
\end{OriginalVerbatim}
% The following \relax is needed to avoid problems with adjacent ANSI
% cells and some other stuff (e.g. bullet lists) following ANSI cells.
% See https://github.com/sphinx-doc/sphinx/issues/3594
\relax
Disregarding planned disbursements, we can see that there is good
coverage of activities which include each of the financial elements
considered.


\chapter{Appendix 1: Data Workbook}
\label{\detokenize{Global Affairs Canada - Compliance Report:Appendix-1:-Data-Workbook}}
Throughout this report various analytical tables have been stored in
separate sheets in the workbook found in the `final' data folder under
`Compliance Report Data.xlsx'. The following cell saves the file:

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [353]: }\PYG{n}{pd\PYGZus{}writer}\PYG{o}{.}\PYG{n}{save}\PYG{p}{(}\PYG{p}{)}
\end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
\textcolor{nbsphinxin}{In [354]: }\PYGZpc{}\PYGZpc{}bash
          
          cp ../data/final/Compliance\PYGZhy{}Report\PYGZhy{}Data.xlsx \PYGZus{}static/
\end{Verbatim}

\sphinxhref{../\_static/Compliance-Report-Data.xlsx}{Download Appendix One}


\chapter{Indices and tables}
\label{\detokenize{index:indices-and-tables}}\begin{itemize}
\item {} 
\DUrole{xref,std,std-ref}{genindex}

\item {} 
\DUrole{xref,std,std-ref}{modindex}

\item {} 
\DUrole{xref,std,std-ref}{search}

\end{itemize}



\renewcommand{\indexname}{Index}
\printindex
\end{document}